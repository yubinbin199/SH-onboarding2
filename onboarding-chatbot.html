<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸Šæµ·åœ°åŒºå…¥èŒæŒ‡å¼• - æ™ºèƒ½åŠ©æ‰‹</title>
    <!-- å†…ç½® faviconï¼Œé¿å… /favicon.ico 404 -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ¤–</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            height: 90vh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* å¤´éƒ¨åŒºåŸŸ */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            background: rgba(255, 255, 255, 0.3);
            height: 8px;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        /* èŠå¤©åŒºåŸŸ */
        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f5f5f5;
        }

        /* æ¶ˆæ¯æ°”æ³¡ */
        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot {
            display: flex;
            justify-content: flex-start;
        }

        .message.user {
            display: flex;
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.6;
        }

        .message.bot .message-content {
            background: white;
            color: #333;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .message.user .message-content {
            background: #667eea;
            color: white;
            border-bottom-right-radius: 4px;
        }

        /* æ­¥éª¤å¡ç‰‡ */
        .step-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin: 10px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #667eea;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .step-title {
            font-weight: bold;
            color: #333;
            font-size: 16px;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .step-content {
            color: #666;
            font-size: 14px;
            line-height: 1.8;
            white-space: pre-line;
        }

        .step-content strong {
            color: #333;
        }

        .step-content a {
            color: #667eea;
            text-decoration: none;
        }

        .step-content a:hover {
            text-decoration: underline;
        }

        .check-button {
            margin-top: 12px;
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .check-button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .check-button.completed {
            background: #4caf50;
            cursor: default;
        }

        .check-button.completed:hover {
            transform: none;
        }

        /* é€‰é¡¹æŒ‰é’® */
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        .option-button {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-align: left;
        }

        .option-button:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }

        /* è¾“å…¥åŒºåŸŸ */
        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
        }

        .input-area input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .input-area input:focus {
            border-color: #667eea;
        }

        .input-area button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .input-area button:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        /* åŠ è½½åŠ¨ç”» */
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 10px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        .chat-area::-webkit-scrollbar {
            width: 6px;
        }

        .chat-area::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .chat-area::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }

        .chat-area::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ¤– ä¸Šæµ·åœ°åŒºå…¥èŒæŒ‡å¼•åŠ©æ‰‹</h1>
            <p>è®©æˆ‘å¸®åŠ©æ‚¨å®Œæˆå…¥èŒæµç¨‹</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- èŠå¤©åŒºåŸŸ -->
        <div class="chat-area" id="chatArea">
            <!-- æ¶ˆæ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
        </div>

        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="input-area">
            <input type="text" id="userInput" placeholder="è¾“å…¥æ¶ˆæ¯æˆ–é€‰æ‹©ä¸Šæ–¹é€‰é¡¹..." />
            <button onclick="sendMessage()">å‘é€</button>
        </div>
    </div>

    <script>
        // ========== æ•°æ®ç»“æ„ ==========
        
        // å…¥èŒæ­¥éª¤æ•°æ®ï¼ˆæ ¹æ®å›¾ç‰‡ä¸­çš„å†…å®¹æ•´ç†ï¼‰
        const onboardingSteps = [
            {
                id: 1,
                title: "ç”µè„‘å·¥ç‰Œé¢†å–ï¼Œå¹¶æœºå¯†ç ä¸ç½‘ç»œ",
                content: `ğŸ“‹ ç”µè„‘å¼€æœºåˆå§‹å¯†ç ï¼šctw123123

ğŸŒ å…¬å¸ç½‘ç»œï¼ˆå«VPNï¼‰ï¼š
   Name: CTW SH
   PW: Bac0nYasa1

ğŸ’¡ é‡è¦æç¤ºï¼šè¯·å¦¥å–„ä¿ç®¡æ‚¨çš„å¯†ç ï¼Œä¸è¦åˆ†äº«ç»™ä»–äººã€‚`
            },
            {
                id: 2,
                title: "Passkeyç»‘å®š",
                content: `ğŸ” Passkeyç»‘å®šæ­¥éª¤ï¼š
   1. æ‰“å¼€æŸé¢IDç³»ç»Ÿï¼ˆå†…éƒ¨dRç³»ç»Ÿï¼‰
   2. è¿›å…¥passkeyç»‘å®šæµç¨‹
   3. è¾“å…¥é‚®ç®±ã€G123IDã€é‚®ç®±éªŒè¯ç 

ğŸ“Œ Passkeyè¯´æ˜ï¼šğŸ”’ passkeyç»‘å®š`
            },
            {
                id: 3,
                title: "På¡ç»Ÿèµ„æ–™å¡«å†™",
                content: `ğŸ“ éœ€è¦å¡«å†™çš„èµ„æ–™ï¼š
   â€¢ ç°åœºèº«ä»½è¯
   â€¢ å¼€æˆ·è¡Œ
   â€¢ é“¶è¡Œå¡å·
   â€¢ é¦–æ¬¡å·¥ä½œæ—¶é—´
   â€¢ ç¤¾è´¦æœå·
   â€¢ å…¬ç§¯é‡‘è´¦å·

âš ï¸ è¯·å‡†å¤‡å¥½ä»¥ä¸Šä¿¡æ¯åè¿›è¡Œå¡«å†™ã€‚`
            },
            {
                id: 4,
                title: "Aç³»ç»Ÿï¼ˆä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼‰",
                content: `ğŸ“Š Aç³»ç»Ÿè¯´æ˜ï¼š
   â€¢ ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ
   â€¢ å·¥ä½œæœŸé—´æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨è¯¥ç³»ç»Ÿè®°å½•
   â€¢ è¯·ä¿æŒå¯ç™»å½•çŠ¶æ€

ğŸ”‘ Aç³»ç»Ÿä»‹ç»Sé‡Œå¡ï¼š
   â€¢ åŒºåˆ†ç¾æœ¯å’Œéç¾æœ¯
   â€¢ ç¾æœ¯ï¼šè¯·æ‰¾è´Ÿè´£PMæˆ–leaderè·å–å¡
   â€¢ éç¾æœ¯ï¼šå¯è‡ªè¡Œåˆ›å»ºæˆ–leaderè¦å¡`
            },
            {
                id: 5,
                title: "Wï¼ˆæµè§ˆæ–‡æ¡£ç³»ç»Ÿï¼‰",
                content: `ğŸ“š Wç³»ç»Ÿï¼ˆæµè§ˆæ–‡æ¡£ç³»ç»Ÿï¼‰ï¼š
   é“¾æ¥ï¼šhttps://w.g123.jp/

ğŸ“‚ æ–‡æ¡£éœ€è¦æ ¹æ®ä¸åŒéƒ¨é—¨å¼€é€šä¸åŒæƒé™ï¼š
   â€¢ tech â€”â€” Tech
   â€¢ creative- Creative
   â€¢ operation- Operation
   â€¢ managment-

ğŸ’¡ æ ¹æ®æ‚¨çš„éƒ¨é—¨ç”³è¯·ç›¸åº”æƒé™ã€‚`
            },
            {
                id: 6,
                title: "é’‰é’‰è¿›ç»„",
                content: `ğŸ’¬ é’‰é’‰è¿›ç»„æ­¥éª¤ï¼š
   1. è´Ÿè´£hrä¼šé‚€è¯·ä½ è¿›å…¥ç¾¤ç»„
   2. è¯·åŒæ„è¿›å…¥
   3. åå­—æ ¼å¼ï¼šä¸­æ–‡-æ‹¼éŸ³

ğŸ”— é‚€è¯·é“¾æ¥ï¼š
https://wx-in-i.dingtalk.com/invite
page/weixin.html?
bizSource=____source____&corpId=ding0387e489e42436f835c2f4657eb6378
f&inviteCode=UtCHSk576JzW4h&dtaction=os

ğŸ“± QQ0ï¼šè¯·æå‰å‡†å¤‡å¥½QQå·ã€‚`
            },
            {
                id: 7,
                title: "å‘˜å·¥åŸºæœ¬ä¿¡æ¯æ”¶é›†",
                content: `ğŸ“‹ ä¿¡æ¯æ”¶é›†è¡¨å•ï¼š
https://alidocs.dingtalk.com/notable/share/form/v01J9LnW6jnE5pZWlvD_dv19yqvsgs3oeb
p3pcjys_1qX0

ğŸ“ è¯·å¦‚å®å¡«å†™æ‚¨çš„åŸºæœ¬ä¿¡æ¯ã€‚`
            },
            {
                id: 8,
                title: "ç‚¹é¤ç³»ç»Ÿ",
                content: `ğŸ± ç‚¹é¤ç³»ç»Ÿä½¿ç”¨æŒ‡å—ï¼š

æ­¥éª¤ï¼š
1. å¾®ä¿¡æœç´¢ï¼š*æ˜¾ç‚¹é¤*å…¬ä¼—
2. ç‚¹å‡»*å¼€å§‹ç‚¹é¤*
3. è¾“å…¥é¤å·ç ï¼Œç™»å½•åå°±å¯ä»¥å¼€å§‹é¢„é¤

âš ï¸ é‡è¦ä¿¡æ¯ï¼š
   â€¢ å§“åï¼šä¸ªäººæ‰‹æœºå·
   â€¢ åˆå§‹å¯†ç ï¼šyidanc66688

ğŸ’¡ é¦–æ¬¡ç™»å½•åè¯·åŠæ—¶ä¿®æ”¹å¯†ç ã€‚`
            },
            {
                id: 9,
                title: "å‘˜å·¥æ‰‹å†Œã€å…¥èŒèµ„æ–™å’Œç”µå­åŠ³åŠ¨åˆåŒç­¾ç½²",
                content: `ğŸ“„ æœ€åæ­¥éª¤ - æ–‡ä»¶ç­¾ç½²ï¼š

1ï¸âƒ£ è¯·å°†å…¥èŒææ–™æ‰“åŒ…å‘é€è‡³ HR é‚®ç®±

2ï¸âƒ£ å‘˜å·¥æ‰‹å†Œè·å–åœ°å€ï¼š
https://w.g123.jp/doc/ws4iua1t13lkzjjt6xmiyihow-QCYVwSBAUZ

3ï¸âƒ£ åŠ³åŠ¨åˆåŒä»¥é‚®ä»¶å½¢å¼å®Œæˆ
   è¯·æ³¨æ„æŸ¥æ”¶é‚®ä»¶å¹¶å®Œæˆç”µå­ç­¾å

âœ… å®Œæˆåæ‚¨çš„å…¥èŒæµç¨‹å°±å…¨éƒ¨å®Œæˆäº†ï¼`
            }
        ];

        // ========== å…¨å±€å˜é‡ ==========
        let currentStep = 0; // å½“å‰æ­¥éª¤
        let completedSteps = []; // å·²å®Œæˆçš„æ­¥éª¤
        let conversationStarted = false; // å¯¹è¯æ˜¯å¦å¼€å§‹

        // ========== åˆå§‹åŒ– ==========
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            loadProgress(); // åŠ è½½ä¿å­˜çš„è¿›åº¦
            showWelcomeMessage(); // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            
            // å›è½¦å‘é€æ¶ˆæ¯
            document.getElementById('userInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        };

        // ========== æ ¸å¿ƒåŠŸèƒ½å‡½æ•° ==========

        // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
        function showWelcomeMessage() {
            setTimeout(() => {
                addBotMessage("æ‚¨å¥½ï¼æ¬¢è¿åŠ å…¥å…¬å¸ ğŸ‰");
            }, 500);
            
            setTimeout(() => {
                addBotMessage("æˆ‘æ˜¯æ‚¨çš„å…¥èŒæŒ‡å¼•åŠ©æ‰‹ï¼Œå°†å¸®åŠ©æ‚¨å®Œæˆä¸Šæµ·åœ°åŒºçš„å…¥èŒæµç¨‹ã€‚");
            }, 1500);
            
            setTimeout(() => {
                if (completedSteps.length > 0) {
                    addBotMessage(`æ£€æµ‹åˆ°æ‚¨å·²å®Œæˆ ${completedSteps.length}/${onboardingSteps.length} ä¸ªæ­¥éª¤ã€‚`);
                    setTimeout(() => {
                        showMainMenu();
                    }, 1000);
                } else {
                    addBotMessage("è®©æˆ‘ä»¬å¼€å§‹å§ï¼è¯·é€‰æ‹©æ‚¨éœ€è¦çš„æœåŠ¡ï¼š");
                    setTimeout(() => {
                        showMainMenu();
                    }, 1000);
                }
            }, 2500);
        }

        // æ˜¾ç¤ºä¸»èœå•
        function showMainMenu() {
            const options = [
                { text: "ğŸ“‹ å¼€å§‹å…¥èŒæµç¨‹", action: "start" }
            ];
            
            addOptionsMessage(options);
        }

        // å¼€å§‹å…¥èŒæµç¨‹
        function startOnboarding() {
            addUserMessage("å¼€å§‹å…¥èŒæµç¨‹");
            
            setTimeout(() => {
                addBotMessage(`å¥½çš„ï¼å…¥èŒæµç¨‹å…±æœ‰ ${onboardingSteps.length} ä¸ªæ­¥éª¤ï¼Œæˆ‘ä¼šé€æ­¥ä¸ºæ‚¨ä»‹ç»ã€‚`);
            }, 500);
            
            setTimeout(() => {
                showNextStep();
            }, 1500);
        }

        // æ˜¾ç¤ºä¸‹ä¸€ä¸ªæ­¥éª¤
        function showNextStep() {
            // æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœªå®Œæˆçš„æ­¥éª¤
            let nextStepIndex = onboardingSteps.findIndex(step => !completedSteps.includes(step.id));
            
            if (nextStepIndex === -1) {
                // æ‰€æœ‰æ­¥éª¤å·²å®Œæˆ
                clearStepCards();
                addBotMessage("ğŸ‰ æ­å–œï¼æ‚¨å·²å®Œæˆæ‰€æœ‰å…¥èŒæ­¥éª¤ï¼");
                setTimeout(() => {
                    addBotMessage("å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶å¯ä»¥é—®æˆ‘ã€‚");
                    setTimeout(showMainMenu, 1000);
                }, 1000);
                return;
            }
            
            currentStep = nextStepIndex;
            const step = onboardingSteps[currentStep];
            
            setTimeout(() => {
                addStepCard(step);
            }, 500);
        }

        // æ·»åŠ æ­¥éª¤å¡ç‰‡
        function addStepCard(step) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            const isCompleted = completedSteps.includes(step.id);
            
            messageDiv.innerHTML = `
                <div class="message-content" style="max-width: 90%;">
                    <div class="step-card">
                        <div class="step-header">
                            <span class="step-title">${step.title}</span>
                            <span class="step-number">${step.id}</span>
                        </div>
                        <div class="step-content">${step.content}</div>
                        <button class="check-button ${isCompleted ? 'completed' : ''}" 
                                onclick="markStepComplete(${step.id})"
                                ${isCompleted ? 'disabled' : ''}>
                            ${isCompleted ? 'âœ“ å·²å®Œæˆ' : 'æ ‡è®°ä¸ºå®Œæˆ'}
                        </button>
                    </div>
                </div>
            `;
            
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // æ ‡è®°æ­¥éª¤å®Œæˆ
        function markStepComplete(stepId) {
            if (!completedSteps.includes(stepId)) {
                completedSteps.push(stepId);
                saveProgress(); // ä¿å­˜è¿›åº¦åˆ°æœ¬åœ°å­˜å‚¨
                updateProgress(); // æ›´æ–°è¿›åº¦æ¡
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                event.target.textContent = 'âœ“ å·²å®Œæˆ';
                event.target.classList.add('completed');
                event.target.disabled = true;
                
                // æ˜¾ç¤ºå®Œæˆæç¤º
                setTimeout(() => {
                    addBotMessage("å¾ˆå¥½ï¼å·²æ ‡è®°ä¸ºå®Œæˆ âœ“");
                }, 300);
                
                // è‡ªåŠ¨æ˜¾ç¤ºä¸‹ä¸€æ­¥
                setTimeout(() => {
                    if (completedSteps.length === onboardingSteps.length) {
                        // æ‰€æœ‰æ­¥éª¤å·²å®Œæˆ
                        clearStepCards();
                        addBotMessage("ğŸ‰ æ­å–œï¼æ‚¨å·²å®Œæˆæ‰€æœ‰å…¥èŒæ­¥éª¤ï¼");
                        setTimeout(() => {
                            addBotMessage("å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶å¯ä»¥é—®æˆ‘ã€‚");
                            setTimeout(showMainMenu, 1000);
                        }, 1000);
                    } else {
                        // ç»§ç»­ä¸‹ä¸€æ­¥
                        addBotMessage("è®©æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥...");
                        setTimeout(showNextStep, 1000);
                    }
                }, 1000);
            }
        }

        // å®Œæˆå½“å‰æ­¥éª¤å¹¶ç»§ç»­
        function completeAndNext(stepId) {
            markStepComplete(stepId);
            
            setTimeout(() => {
                if (completedSteps.length === onboardingSteps.length) {
                    addBotMessage("ğŸ‰ æ­å–œï¼æ‚¨å·²å®Œæˆæ‰€æœ‰å…¥èŒæ­¥éª¤ï¼");
                    setTimeout(showMainMenu, 1500);
                } else {
                    addBotMessage("è®©æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥...");
                    setTimeout(showNextStep, 1000);
                }
            }, 1000);
        }

        // æŸ¥çœ‹æ‰€æœ‰æ­¥éª¤
        function viewAllSteps() {
            addUserMessage("æŸ¥çœ‹æ‰€æœ‰æ­¥éª¤");
            
            setTimeout(() => {
                addBotMessage("è¿™æ˜¯å®Œæ•´çš„å…¥èŒæµç¨‹æ¸…å•ï¼š");
            }, 500);
            
            onboardingSteps.forEach((step, index) => {
                setTimeout(() => {
                    addStepCard(step);
                }, 1000 + index * 800);
            });
            
            setTimeout(() => {
                showMainMenu();
            }, 1000 + onboardingSteps.length * 800 + 500);
        }

        // æŸ¥çœ‹ç‰¹å®šæ­¥éª¤
        function viewSpecificStep() {
            addUserMessage("æŸ¥çœ‹ç‰¹å®šæ­¥éª¤");
            
            setTimeout(() => {
                addBotMessage("è¯·é€‰æ‹©æ‚¨æƒ³æŸ¥çœ‹çš„æ­¥éª¤ï¼š");
            }, 500);
            
            setTimeout(() => {
                const stepOptions = onboardingSteps.map(step => ({
                    text: `${step.id}. ${step.title}`,
                    action: `showStep:${step.id}`
                }));
                stepOptions.push({ text: "ğŸ  è¿”å›ä¸»èœå•", action: "menu" });
                addOptionsMessage(stepOptions);
            }, 1000);
        }

        // æ˜¾ç¤ºæŒ‡å®šæ­¥éª¤
        function showStep(stepId) {
            const step = onboardingSteps.find(s => s.id === stepId);
            if (step) {
                addUserMessage(step.title);
                setTimeout(() => {
                    addStepCard(step);
                }, 500);
                
                setTimeout(() => {
                    showMainMenu();
                }, 1500);
            }
        }

        // æŸ¥çœ‹è¿›åº¦
        function viewProgress() {
            addUserMessage("æŸ¥çœ‹æˆ‘çš„è¿›åº¦");
            
            const progress = Math.round((completedSteps.length / onboardingSteps.length) * 100);
            
            setTimeout(() => {
                addBotMessage(`ğŸ“Š æ‚¨çš„å…¥èŒè¿›åº¦ï¼š${completedSteps.length}/${onboardingSteps.length} (${progress}%)`);
            }, 500);
            
            setTimeout(() => {
                if (completedSteps.length === 0) {
                    addBotMessage("æ‚¨è¿˜æ²¡æœ‰å¼€å§‹å…¥èŒæµç¨‹ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼");
                } else if (completedSteps.length === onboardingSteps.length) {
                    addBotMessage("ğŸ‰ å¤ªæ£’äº†ï¼æ‚¨å·²å®Œæˆæ‰€æœ‰æ­¥éª¤ï¼");
                } else {
                    addBotMessage(`è¿˜æœ‰ ${onboardingSteps.length - completedSteps.length} ä¸ªæ­¥éª¤å¾…å®Œæˆã€‚`);
                }
            }, 1500);
            
            setTimeout(showMainMenu, 2500);
        }

        // é‡ç½®è¿›åº¦
        function resetProgress() {
            addUserMessage("é‡ç½®è¿›åº¦");
            
            setTimeout(() => {
                addBotMessage("ç¡®å®šè¦é‡ç½®æ‰€æœ‰è¿›åº¦å—ï¼Ÿ");
            }, 500);
            
            setTimeout(() => {
                const confirmOptions = [
                    { text: "âœ“ ç¡®è®¤é‡ç½®", action: "confirmReset" },
                    { text: "âœ— å–æ¶ˆ", action: "menu" }
                ];
                addOptionsMessage(confirmOptions);
            }, 1000);
        }

        // ç¡®è®¤é‡ç½®
        function confirmReset() {
            completedSteps = [];
            saveProgress();
            updateProgress();
            
            addUserMessage("ç¡®è®¤é‡ç½®");
            
            setTimeout(() => {
                addBotMessage("è¿›åº¦å·²é‡ç½®ï¼è®©æˆ‘ä»¬é‡æ–°å¼€å§‹å§ã€‚");
            }, 500);
            
            setTimeout(showMainMenu, 1500);
        }

        // ========== æ¶ˆæ¯æ˜¾ç¤ºå‡½æ•° ==========

        // æ·»åŠ æœºå™¨äººæ¶ˆæ¯
        function addBotMessage(text) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            messageDiv.innerHTML = `<div class="message-content">${text}</div>`;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        function addUserMessage(text) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `<div class="message-content">${text}</div>`;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // æ·»åŠ é€‰é¡¹æŒ‰é’®
        function addOptionsMessage(options) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            let optionsHTML = '<div class="message-content" style="max-width: 90%;"><div class="options">';
            options.forEach(option => {
                optionsHTML += `<button class="option-button" onclick="handleOption('${option.action}')">${option.text}</button>`;
            });
            optionsHTML += '</div></div>';
            
            messageDiv.innerHTML = optionsHTML;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // æ¸…ç©ºå·²å±•ç¤ºçš„æ­¥éª¤å¡ç‰‡ï¼ˆä»…ç§»é™¤å¡ç‰‡å‹æ¶ˆæ¯ï¼Œä¿ç•™æ™®é€šå¯¹è¯ï¼‰
        function clearStepCards() {
            const chatArea = document.getElementById('chatArea');
            const cards = chatArea.querySelectorAll('.step-card');
            cards.forEach(card => {
                const messageWrapper = card.closest('.message');
                if (messageWrapper) {
                    messageWrapper.remove();
                } else {
                    card.remove();
                }
            });
        }

        // å¤„ç†é€‰é¡¹ç‚¹å‡»
        function handleOption(action) {
            if (action === 'start') {
                startOnboarding();
            } else if (action === 'viewAll') {
                viewAllSteps();
            } else if (action === 'viewSpecific') {
                viewSpecificStep();
            } else if (action === 'viewProgress') {
                viewProgress();
            } else if (action === 'reset') {
                resetProgress();
            } else if (action === 'menu') {
                addUserMessage("è¿”å›ä¸»èœå•");
                setTimeout(showMainMenu, 500);
            } else if (action === 'skipToNext') {
                addUserMessage("è·³è¿‡ï¼ŒæŸ¥çœ‹ä¸‹ä¸€æ­¥");
                setTimeout(showNextStep, 500);
            } else if (action.startsWith('completeAndNext:')) {
                const stepId = parseInt(action.split(':')[1]);
                addUserMessage("å®Œæˆå¹¶ç»§ç»­ä¸‹ä¸€æ­¥");
                completeAndNext(stepId);
            } else if (action.startsWith('showStep:')) {
                const stepId = parseInt(action.split(':')[1]);
                showStep(stepId);
            } else if (action === 'confirmReset') {
                confirmReset();
            }
        }

        // å‘é€ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯
        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            
            if (text === '') return;
            
            addUserMessage(text);
            input.value = '';
            
            // ç®€å•çš„å…³é”®è¯åŒ¹é…
            setTimeout(() => {
                handleUserInput(text);
            }, 500);
        }

        // å¤„ç†ç”¨æˆ·è¾“å…¥
        function handleUserInput(text) {
            const lowerText = text.toLowerCase();
            
            if (lowerText.includes('å¼€å§‹') || lowerText.includes('æµç¨‹')) {
                startOnboarding();
            } else if (lowerText.includes('æŸ¥çœ‹') && lowerText.includes('æ‰€æœ‰')) {
                viewAllSteps();
            } else if (lowerText.includes('è¿›åº¦')) {
                viewProgress();
            } else if (lowerText.includes('é‡ç½®')) {
                resetProgress();
            } else if (lowerText.includes('èœå•') || lowerText.includes('å¸®åŠ©')) {
                addBotMessage("å¥½çš„ï¼Œè¿™æ˜¯ä¸»èœå•ï¼š");
                setTimeout(showMainMenu, 500);
            } else {
                // å°è¯•åŒ¹é…æ­¥éª¤å…³é”®è¯
                let foundStep = false;
                for (let step of onboardingSteps) {
                    if (lowerText.includes(step.title.toLowerCase().substring(0, 3))) {
                        showStep(step.id);
                        foundStep = true;
                        break;
                    }
                }
                
                if (!foundStep) {
                    addBotMessage("æŠ±æ­‰ï¼Œæˆ‘ä¸å¤ªæ˜ç™½ã€‚æ‚¨å¯ä»¥ï¼š");
                    setTimeout(showMainMenu, 500);
                }
            }
        }

        // ========== è¿›åº¦ç®¡ç†å‡½æ•° ==========

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const progress = (completedSteps.length / onboardingSteps.length) * 100;
            progressFill.style.width = progress + '%';
        }

        // ä¿å­˜è¿›åº¦åˆ°æœ¬åœ°å­˜å‚¨
        function saveProgress() {
            localStorage.setItem('onboardingProgress', JSON.stringify(completedSteps));
            console.log('è¿›åº¦å·²ä¿å­˜:', completedSteps);
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¿›åº¦
        function loadProgress() {
            const saved = localStorage.getItem('onboardingProgress');
            if (saved) {
                completedSteps = JSON.parse(saved);
                updateProgress();
                console.log('è¿›åº¦å·²åŠ è½½:', completedSteps);
            }
        }

        // æ»šåŠ¨åˆ°åº•éƒ¨
        function scrollToBottom() {
            const chatArea = document.getElementById('chatArea');
            chatArea.scrollTop = chatArea.scrollHeight;
        }
    </script>
</body>
</html>
