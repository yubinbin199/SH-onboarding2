<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTWæ™ºèƒ½å…¥èŒæŒ‡å¼•ï¼ˆAIç‰ˆï¼‰</title>
    <!-- å†…ç½® faviconï¼Œé¿å… /favicon.ico 404 -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ¤–</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            height: 90vh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* å¤´éƒ¨åŒºåŸŸ */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            background: rgba(255, 255, 255, 0.3);
            height: 8px;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        /* èŠå¤©åŒºåŸŸ */
        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f5f5f5;
        }

        /* æ¶ˆæ¯æ°”æ³¡ */
        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot {
            display: flex;
            justify-content: flex-start;
        }

        .message.user {
            display: flex;
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.6;
        }

        .message.bot .message-content {
            background: white;
            color: #333;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .message.user .message-content {
            background: #667eea;
            color: white;
            border-bottom-right-radius: 4px;
        }

        /* æ­¥éª¤å¡ç‰‡ */
        .step-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin: 10px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #667eea;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .step-title {
            font-weight: bold;
            color: #333;
            font-size: 16px;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .step-content {
            color: #666;
            font-size: 14px;
            line-height: 1.8;
            white-space: pre-line;
        }

        .step-content strong {
            color: #333;
        }

        .step-content a {
            color: #667eea;
            text-decoration: none;
        }

        .step-content a:hover {
            text-decoration: underline;
        }

        .check-button {
            margin-top: 12px;
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .check-button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .check-button.completed {
            background: #4caf50;
            cursor: default;
        }

        .check-button.completed:hover {
            transform: none;
        }

        /* é€‰é¡¹æŒ‰é’® */
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        .option-button {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-align: left;
        }

        .option-button:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }

        /* è¾“å…¥åŒºåŸŸ */
        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
        }

        .input-area input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .input-area input:focus {
            border-color: #667eea;
        }

        .input-area button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .input-area button:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        /* åŠ è½½åŠ¨ç”» */
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 10px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        .chat-area::-webkit-scrollbar {
            width: 6px;
        }

        .chat-area::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .chat-area::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }

        .chat-area::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* ç™»å½•é¡µé¢æ ·å¼ */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .login-box {
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            border-radius: 16px;
            padding: 60px 80px;
            text-align: center;
            max-width: 500px;
            width: 90%;
        }

        .login-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .login-title {
            color: #ffffff;
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .login-subtitle {
            color: #9ca3af;
            font-size: 16px;
            margin-bottom: 40px;
        }

        .login-button {
            width: 100%;
            padding: 16px;
            margin: 10px 0;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .login-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .login-button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .login-button.secondary {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .login-button.secondary:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .login-footer {
            color: #6b7280;
            font-size: 14px;
            margin-top: 30px;
        }

        /* Passkeyç»‘å®šé¡µé¢æ ·å¼ */
        .bind-passkey-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            z-index: 10000;
            display: none;
            overflow-y: auto;
            padding: 40px 20px;
        }

        .bind-passkey-container {
            max-width: 600px;
            margin: 0 auto;
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            border-radius: 16px;
            padding: 40px;
        }

        .bind-passkey-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .bind-passkey-title {
            color: #ffffff;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .bind-passkey-subtitle {
            color: #9ca3af;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            color: #ffffff;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            background: #1a1a1a;
            border: 1px solid #3a3a3a;
            border-radius: 8px;
            color: #ffffff;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-input::placeholder {
            color: #6b7280;
        }

        .instructions-box {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }

        .instructions-title {
            color: #667eea;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instructions-content {
            color: #d1d5db;
            font-size: 14px;
            line-height: 1.8;
        }

        .instructions-content ol {
            margin: 10px 0;
            padding-left: 20px;
        }

        .instructions-content li {
            margin: 8px 0;
        }

        .form-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .form-button {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-button.submit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .form-button.submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }

        .form-button.cancel {
            background: transparent;
            color: #9ca3af;
            border: 1px solid #3a3a3a;
        }

        .form-button.cancel:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- ç™»å½•é¡µé¢ -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-box">
            <div class="login-icon">ğŸ”</div>
            <h1 class="login-title">Welcome to Xiao Bao</h1>
            <p class="login-subtitle">Sign in with your passkey to continue</p>
            
            <button class="login-button primary" onclick="signInWithPasskey()">
                <span>âœ</span>
                <span>Sign in with Passkey</span>
            </button>
            
            <button class="login-button secondary" onclick="showBindPasskeyPage()">
                ç»‘å®špasskey
            </button>
            
            <p class="login-footer">After signing in, click "Open Xiao Bao" in your<br>browser to return</p>
        </div>
    </div>

    <!-- Passkeyç»‘å®šé¡µé¢ -->
    <div class="bind-passkey-page" id="bindPasskeyPage">
        <div class="bind-passkey-container">
            <div class="bind-passkey-header">
                <h2 class="bind-passkey-title">ğŸ” ç»‘å®šPasskey</h2>
                <p class="bind-passkey-subtitle">è¯·å¡«å†™ä»¥ä¸‹ä¿¡æ¯å®ŒæˆPasskeyç»‘å®š</p>
            </div>

            <form id="bindPasskeyForm" onsubmit="submitBindPasskey(event)">
                <div class="form-group">
                    <label class="form-label">é‚®ç®±åœ°å€ *</label>
                    <input type="email" class="form-input" id="emailInput" placeholder="è¯·è¾“å…¥æ‚¨çš„å…¬å¸é‚®ç®±" required>
                </div>

                <div class="form-group">
                    <label class="form-label">G123 ID *</label>
                    <input type="text" class="form-input" id="g123idInput" placeholder="è¯·è¾“å…¥æ‚¨çš„G123 ID" required>
                </div>

                <div class="instructions-box">
                    <div class="instructions-title">
                        <span>â„¹ï¸</span>
                        <span>Passkeyç»‘å®šè¯´æ˜</span>
                    </div>
                    <div class="instructions-content">
                        <h3 style="color: #667eea; margin-top: 10px; margin-bottom: 10px;">ğŸ–¥ï¸ Windows ç³»çµ±</h3>
                        <p><strong>Step 1:</strong> é–‹å•ŸChrome browserï¼Œ<strong>ç™»å…¥ç§äººGoogle å¸³è™Ÿ</strong></p>
                        <p style="margin-left: 20px; color: #fbbf24;">âš ï¸ é‡è¦æé†’ï¼šChrome è¨­å®š â†’ åŒæ­¥éœ€è¦ç¢ºèªPasskeyåŒæ­¥å·²é–‹å•Ÿ</p>
                        
                        <p><strong>Step 2:</strong> é–‹å•Ÿ <a href="http://g123.jp" target="_blank" style="color: #667eea; text-decoration: underline;">g123.jp</a> ç¶²ç«™ï¼Œé»æ“ŠSNSç¶å®špasskeyé¸é …</p>
                        <p style="margin-left: 20px;">é¸æ“‡ä»¥å…¶ä»–æ–¹å¼å„²å­˜ï¼Œgoogleå¯†ç¢¼ç®¡ç†å·¥å…·ï¼Œå°‡å¯†ç¢¼å„²å­˜åœ¨é›²ç«¯ä»¥ä¾¿çˆ¾å¾Œåˆ‡æ›è¨­å‚™ä½¿ç”¨</p>
                        
                        <p><strong>Step 3:</strong> è¼¸å…¥å…­ä½æ•¸ç™»å…¥pin code</p>
                        
                        <p><strong>Step 4:</strong> ç¶å®šæˆåŠŸ</p>
                        
                        <p><strong>Step 5:</strong> å°‡ç¶å®šæˆåŠŸçš„g123 idè¤‡è£½è²¼ä¸Šè‡³è©²é é¢ä¸­ï¼Œè¼¸å…¥è‡ªå·±çš„éƒµç®±ï¼Œé»æ“Šæäº¤</p>

                        <h3 style="color: #667eea; margin-top: 20px; margin-bottom: 10px;">ğŸ Mac ç³»çµ±</h3>
                        <p><strong>Step 1:</strong> é–‹å•Ÿ <a href="http://g123.jp" target="_blank" style="color: #667eea; text-decoration: underline;">g123.jp</a>ï¼Œé»æ“ŠSNSç¶å®špasskeyé¸é …</p>
                        
                        <p><strong>Step 2:</strong> ç‚ºG123 IDå»ºç«‹é‡‘é‘°</p>
                        <p style="margin-left: 20px;">å¯é¸æ“‡å°‡é‡‘é‘°å„²å­˜è‡³Google å¯†ç¢¼ç®¡ç†å·¥å…·æˆ–æ˜¯iCloudï¼Œå°‡å¯†ç¢¼å„²å­˜åœ¨é›²ç«¯ä»¥ä¾¿çˆ¾å¾Œåˆ‡æ›è¨­å‚™ä½¿ç”¨</p>
                        
                        <p><strong>Step 3:</strong> ä½¿ç”¨å¯†ç¢¼æˆ–Touch IDé€²è¡Œç¶å®š</p>
                        
                        <p><strong>Step 4:</strong> ç¶å®šæˆåŠŸ</p>
                        
                        <p><strong>Step 5:</strong> å°‡ç¶å®šæˆåŠŸçš„g123 idè¤‡è£½è²¼ä¸Šè‡³è©²é é¢ä¸­ï¼Œè¼¸å…¥è‡ªå·±çš„éƒµç®±ï¼Œé»æ“Šæäº¤</p>
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" class="form-button cancel" onclick="cancelBindPasskey()">å–æ¶ˆ</button>
                    <button type="submit" class="form-button submit">æäº¤ç»‘å®š</button>
                </div>
            </form>
        </div>
    </div>

    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ¤– CTWæ™ºèƒ½å…¥èŒæŒ‡å¼•</h1>
            <p>AIåŠ©æ‰‹å¸¦æ‚¨å®Œæˆå…¥èŒæµç¨‹</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- èŠå¤©åŒºåŸŸ -->
        <div class="chat-area" id="chatArea">
            <!-- æ¶ˆæ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
        </div>

        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="input-area">
            <input type="text" id="userInput" placeholder="è¾“å…¥æ¶ˆæ¯æˆ–é€‰æ‹©ä¸Šæ–¹é€‰é¡¹..." />
            <button onclick="sendMessage()">å‘é€</button>
        </div>
    </div>

    <script>
        // ========== æ•°æ®ç»“æ„ ==========
        
        // å…¥èŒæ­¥éª¤æ•°æ®ï¼ˆCTWæ™ºèƒ½å…¥èŒæŒ‡å¼• AIç‰ˆ - æœ€æ–°ç‰ˆæœ¬ï¼‰
        const onboardingSteps = [
            {
                id: 1,
                title: "Pç³»ç»Ÿèµ„æ–™å¡«å†™",
                content: `ğŸ“ å¡«å†™ä»¥ä¸‹ä¸ªäººä¿¡æ¯ï¼š
   â€¢ æ‰‹æœºå·ç 
   â€¢ èº«ä»½è¯å·
   â€¢ å¼€æˆ·è¡Œ
   â€¢ é“¶è¡Œå¡å·
   â€¢ é¦–æ¬¡å·¥ä½œæ—¶é—´
   â€¢ ç¤¾ä¿è´¦å·
   â€¢ å…¬ç§¯é‡‘è´¦å·
   â€¢ å©šå§»çŠ¶æ€ç­‰

ğŸ“ å¡«å†™å…¥å£ï¼ˆé’‰é’‰è¡¨å•ï¼‰ï¼š
<a href="https://alidocs.dingtalk.com/notable/share/form/v01J9LnW6jmE5pZWlvD_dv19yqvsgs3oebp3pcjys_1qX0QQ0" target="_blank">ç‚¹å‡»å¡«å†™</a>

âš ï¸ è¯·å¦‚å®å¡«å†™æ‰€æœ‰ä¿¡æ¯ã€‚`
            },
            {
                id: 2,
                title: "å¸¸ç”¨ç³»ç»Ÿä¸€è§ˆ",
                content: `âš™ï¸ <strong>Aç³»ç»Ÿï¼ˆä»»åŠ¡ç®¡ç†ï¼‰</strong>
ğŸ”— <a href="https://a.g123.jp" target="_blank">https://a.g123.jp</a>
ç”¨äºä»»åŠ¡ä¸è®¡æ—¶ç®¡ç†ï¼Œè¯·ç¡®ä¿å¯æ­£å¸¸ç™»å½•ã€‚

ğŸ‘¥ è·å–æƒé™ï¼š
   â€¢ <strong>ç¾æœ¯èŒä½</strong>ï¼šè¯·è”ç³»è´Ÿè´£PMæˆ–Leaderé¢†å–å¡
   â€¢ <strong>éç¾æœ¯èŒä½</strong>ï¼šå¯è‡ªè¡Œåˆ›å»ºæˆ–å‘Leaderç”³è¯·å¡

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š <strong>Wç³»ç»Ÿï¼ˆå†…éƒ¨æ–‡æ¡£ï¼‰</strong>
ğŸ”— <a href="https://w.g123.jp" target="_blank">https://w.g123.jp</a>
ç”¨äºæŸ¥çœ‹å†…éƒ¨æ–‡æ¡£èµ„æ–™ã€‚

ğŸ” ä¸åŒéƒ¨é—¨æœ‰å¯¹åº”è®¿é—®æƒé™ï¼š
   â€¢ Techï¼ˆæŠ€æœ¯ï¼‰
   â€¢ Creativeï¼ˆåˆ›æ„ï¼‰
   â€¢ Operationï¼ˆè¿è¥ï¼‰
   â€¢ Managementï¼ˆç®¡ç†ï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¨ <strong>Eç³»ç»Ÿï¼ˆä»…é™ç¾æœ¯èŒä½ï¼‰</strong>
ğŸ”— <a href="https://e.g123.jp" target="_blank">https://e.g123.jp</a>
ç”¨äºç¾æœ¯ç´ æåˆ¶ä½œã€ç®¡ç†ä¸ç›‘ä¿®ã€‚

âš ï¸ æ³¨æ„ï¼š<strong>ä»…é™ç¾æœ¯èŒä½ä½¿ç”¨</strong>ï¼Œéç¾æœ¯èŒä½æ— éœ€å…³æ³¨æ­¤ç³»ç»Ÿã€‚`
            },
            {
                id: 3,
                title: "é’‰é’‰å…¥ç»„",
                content: `ğŸ’¬ è¯·é€šè¿‡ä»¥ä¸‹é“¾æ¥åŠ å…¥å›¢é˜Ÿé’‰é’‰ç¾¤ç»„

ğŸ”— åŠ å…¥é“¾æ¥ï¼š
<a href="https://wx-in-i.dingtalk.com/invite-page/weixin.html?bizSource=____source____&corpId=ding0387e489e42436f835c2f4657eb6378f&inviteCode=UtCFfSk576JzW4h&dtaction=os" target="_blank">ç‚¹å‡»åŠ å…¥</a>

âš ï¸ <strong>åç§°æ ¼å¼è¦æ±‚ï¼šä¸­æ–‡-æ‹¼éŸ³</strong>
   ç¤ºä¾‹ï¼šç‹å°æ˜-Wang Xiaoming

ğŸ’¡ è¯·ç¡®ä¿æ‚¨çš„é’‰é’‰æ˜µç§°ç¬¦åˆæ ¼å¼è¦æ±‚ã€‚`
            },
            {
                id: 4,
                title: "ç‚¹é¤ç³»ç»Ÿ",
                content: `ğŸ± ç‚¹é¤ç³»ç»Ÿä½¿ç”¨æŒ‡å—

ğŸ“± <strong>æ­¥éª¤1ï¼š</strong>è¯·å°†æ‰‹æœºå·æä¾›ç»™ <strong>è¡Œæ”¿-æ¨æ™ºå°§</strong>ï¼Œå®Œæˆæ³¨å†Œ

ğŸ“± <strong>æ­¥éª¤2ï¼š</strong>å¾®ä¿¡æœç´¢"<strong>æ˜“ç‚¹åƒ</strong>"å…¬ä¼—å·

ğŸ“± <strong>æ­¥éª¤3ï¼š</strong>ç‚¹å‡»"<strong>å¼€å§‹ç‚¹é¤</strong>"

ğŸ”‘ ç™»å½•ä¿¡æ¯ï¼š
   â€¢ è´¦å·åï¼š<strong>æ‰‹æœºå·</strong>
   â€¢ åˆå§‹å¯†ç ï¼š<strong>yidianc66688</strong>

ğŸ’¡ å…¥èŒå½“å¤©çš„é¥­è¯·åœ¨èŒ¶æ°´é—´æ‹¿å¤‡é¤

âš ï¸ é¦–æ¬¡ç™»å½•åè¯·åŠæ—¶ä¿®æ”¹å¯†ç ã€‚`
            },
            {
                id: 5,
                title: "å®Œæˆå…¥èŒ",
                content: `ğŸ‰ <strong>æ­å–œï¼æ‚¨å·²å®Œæˆå…¨éƒ¨å…¥èŒæµç¨‹ï¼</strong>

ğŸ“© åŠ³åŠ¨åˆåŒå°†é€šè¿‡ <strong>è…¾è®¯ç”µå­ç­¾</strong> å‘é€
   â€¢ è¯·ç•™æ„çŸ­ä¿¡é€šçŸ¥
   â€¢ è¯·äºå½“å¤©å®Œæˆç­¾ç½²

ğŸ“˜ å‘˜å·¥æ‰‹å†Œï¼š
<a href="https://w.g123.jp/doc/ws4iua1t13lkzjlt6xmiyvlhow-QCYVwSBAUZ" target="_blank">ç‚¹å‡»æŸ¥çœ‹å‘˜å·¥æ‰‹å†Œï¼ˆWç³»ç»Ÿï¼‰</a>

âœ… æ¬¢è¿æ­£å¼åŠ å…¥å›¢é˜Ÿï¼`
            }
        ];

        // ========== å…¨å±€å˜é‡ ==========
        let currentStep = 0; // å½“å‰æ­¥éª¤
        let completedSteps = []; // å·²å®Œæˆçš„æ­¥éª¤
        let conversationStarted = false; // å¯¹è¯æ˜¯å¦å¼€å§‹
        let isLoggedIn = false; // æ˜¯å¦å·²ç™»å½•

        // ========== åˆå§‹åŒ– ==========
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            loadProgress(); // åŠ è½½ä¿å­˜çš„è¿›åº¦
            
            // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
            const loginStatus = localStorage.getItem('isLoggedIn');
            if (loginStatus === 'true') {
                // å·²ç™»å½•ï¼Œéšè—ç™»å½•é¡µé¢ï¼Œæ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
                hideLoginPage();
                showWelcomeMessage();
            } else {
                // æœªç™»å½•ï¼Œæ˜¾ç¤ºç™»å½•é¡µé¢
                showLoginPage();
            }
            
            // å›è½¦å‘é€æ¶ˆæ¯
            document.getElementById('userInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        };

        // ========== ç™»å½•ç›¸å…³å‡½æ•° ==========

        // æ˜¾ç¤ºç™»å½•é¡µé¢
        function showLoginPage() {
            document.getElementById('loginOverlay').style.display = 'flex';
        }

        // éšè—ç™»å½•é¡µé¢
        function hideLoginPage() {
            document.getElementById('loginOverlay').style.display = 'none';
        }

        // æ˜¾ç¤ºPasskeyç»‘å®šé¡µé¢
        function showBindPasskeyPage() {
            document.getElementById('bindPasskeyPage').style.display = 'block';
        }

        // å–æ¶ˆPasskeyç»‘å®š
        function cancelBindPasskey() {
            document.getElementById('bindPasskeyPage').style.display = 'none';
            document.getElementById('bindPasskeyForm').reset();
        }

        // æäº¤Passkeyç»‘å®š
        function submitBindPasskey(event) {
            event.preventDefault();
            
            const email = document.getElementById('emailInput').value;
            const g123id = document.getElementById('g123idInput').value;
            
            // æ˜¾ç¤ºç»‘å®šä¸­çš„æç¤º
            const submitBtn = event.target.querySelector('.form-button.submit');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'ç»‘å®šä¸­...';
            submitBtn.disabled = true;
            
            // æ¨¡æ‹Ÿç»‘å®šè¿‡ç¨‹ï¼ˆå®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè°ƒç”¨åç«¯APIï¼‰
            setTimeout(() => {
                // ä¿å­˜ç»‘å®šä¿¡æ¯åˆ°æœ¬åœ°å­˜å‚¨ï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰
                localStorage.setItem('passkeyEmail', email);
                localStorage.setItem('passkeyG123ID', g123id);
                
                // æ˜¾ç¤ºæˆåŠŸæç¤º
                alert('âœ… Passkeyç»‘å®šæˆåŠŸï¼\n\né‚®ç®±ï¼š' + email + '\nG123 IDï¼š' + g123id + '\n\nç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨Passkeyç™»å½•äº†ã€‚');
                
                // é‡ç½®è¡¨å•
                document.getElementById('bindPasskeyForm').reset();
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                // è¿”å›ç™»å½•é¡µé¢
                cancelBindPasskey();
            }, 1500);
        }

        // ä½¿ç”¨Passkeyç™»å½•
        function signInWithPasskey() {
            // æ˜¾ç¤ºç™»å½•ä¸­çš„æç¤º
            const loginBtn = event.target.closest('.login-button');
            const originalHTML = loginBtn.innerHTML;
            loginBtn.innerHTML = '<span>ğŸ”„</span><span>ç™»å½•ä¸­...</span>';
            loginBtn.disabled = true;
            
            // æ¨¡æ‹Ÿç™»å½•è¿‡ç¨‹ï¼ˆå®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè°ƒç”¨Passkeyè®¤è¯APIï¼‰
            setTimeout(() => {
                // æ ‡è®°ä¸ºå·²ç™»å½•
                isLoggedIn = true;
                localStorage.setItem('isLoggedIn', 'true');
                
                // éšè—ç™»å½•é¡µé¢
                hideLoginPage();
                
                // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯å¹¶å¼€å§‹å…¥èŒæµç¨‹
                showWelcomeMessage();
                
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                loginBtn.innerHTML = originalHTML;
                loginBtn.disabled = false;
            }, 1000);
        }

        // ========== æ ¸å¿ƒåŠŸèƒ½å‡½æ•° ==========

        // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
        function showWelcomeMessage() {
            setTimeout(() => {
                addBotMessage("æ‚¨å¥½ï¼æ¬¢è¿åŠ å…¥å…¬å¸ ğŸ‰");
            }, 500);
            
            setTimeout(() => {
                addBotMessage("æˆ‘æ˜¯æ‚¨çš„AIå…¥èŒåŠ©æ‰‹ï¼Œå°†å¸®åŠ©æ‚¨å®ŒæˆCTWçš„å…¥èŒæµç¨‹ã€‚");
            }, 1500);
            
            setTimeout(() => {
                if (completedSteps.length > 0) {
                    addBotMessage(`æ£€æµ‹åˆ°æ‚¨å·²å®Œæˆ ${completedSteps.length}/${onboardingSteps.length} ä¸ªæ­¥éª¤ã€‚`);
                    setTimeout(() => {
                        showMainMenu();
                    }, 1000);
                } else {
                    addBotMessage("è®©æˆ‘ä»¬å¼€å§‹å§ï¼è¯·é€‰æ‹©æ‚¨éœ€è¦çš„æœåŠ¡ï¼š");
                    setTimeout(() => {
                        showMainMenu();
                    }, 1000);
                }
            }, 2500);
        }

        // æ˜¾ç¤ºä¸»èœå•
        function showMainMenu() {
            const options = [
                { text: "ğŸ“‹ å¼€å§‹å…¥èŒæµç¨‹", action: "start" }
            ];
            
            addOptionsMessage(options);
        }

        // å¼€å§‹å…¥èŒæµç¨‹
        function startOnboarding() {
            addUserMessage("å¼€å§‹å…¥èŒæµç¨‹");
            
            setTimeout(() => {
                addBotMessage(`å¥½çš„ï¼å…¥èŒæµç¨‹å…±æœ‰ ${onboardingSteps.length} ä¸ªæ­¥éª¤ï¼Œæˆ‘ä¼šé€æ­¥ä¸ºæ‚¨ä»‹ç»ã€‚`);
            }, 500);
            
            setTimeout(() => {
                showNextStep();
            }, 1500);
        }

        // æ˜¾ç¤ºä¸‹ä¸€ä¸ªæ­¥éª¤
        function showNextStep() {
            // æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœªå®Œæˆçš„æ­¥éª¤
            let nextStepIndex = onboardingSteps.findIndex(step => !completedSteps.includes(step.id));
            
            if (nextStepIndex === -1) {
                // æ‰€æœ‰æ­¥éª¤å·²å®Œæˆ
                clearStepCards();
                addBotMessage("ğŸ‰ æ­å–œï¼æ‚¨å·²å®Œæˆæ‰€æœ‰å…¥èŒæ­¥éª¤ï¼");
                setTimeout(() => {
                    addBotMessage("å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶å¯ä»¥é—®æˆ‘ã€‚");
                    setTimeout(showMainMenu, 1000);
                }, 1000);
                return;
            }
            
            currentStep = nextStepIndex;
            const step = onboardingSteps[currentStep];
            
            setTimeout(() => {
                addStepCard(step);
            }, 500);
        }

        // æ·»åŠ æ­¥éª¤å¡ç‰‡
        function addStepCard(step) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            const isCompleted = completedSteps.includes(step.id);
            
            messageDiv.innerHTML = `
                <div class="message-content" style="max-width: 90%;">
                    <div class="step-card">
                        <div class="step-header">
                            <span class="step-title">${step.title}</span>
                            <span class="step-number">${step.id}</span>
                        </div>
                        <div class="step-content">${step.content}</div>
                        <button class="check-button ${isCompleted ? 'completed' : ''}" 
                                onclick="markStepComplete(${step.id})"
                                ${isCompleted ? 'disabled' : ''}>
                            ${isCompleted ? 'âœ“ å·²å®Œæˆ' : 'æ ‡è®°ä¸ºå®Œæˆ'}
                        </button>
                    </div>
                </div>
            `;
            
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // æ ‡è®°æ­¥éª¤å®Œæˆ
        function markStepComplete(stepId) {
            if (!completedSteps.includes(stepId)) {
                completedSteps.push(stepId);
                saveProgress(); // ä¿å­˜è¿›åº¦åˆ°æœ¬åœ°å­˜å‚¨
                updateProgress(); // æ›´æ–°è¿›åº¦æ¡
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                event.target.textContent = 'âœ“ å·²å®Œæˆ';
                event.target.classList.add('completed');
                event.target.disabled = true;
                
                // æ˜¾ç¤ºå®Œæˆæç¤º
                setTimeout(() => {
                    addBotMessage("å¾ˆå¥½ï¼å·²æ ‡è®°ä¸ºå®Œæˆ âœ“");
                }, 300);
                
                // è‡ªåŠ¨æ˜¾ç¤ºä¸‹ä¸€æ­¥
                setTimeout(() => {
                    if (completedSteps.length === onboardingSteps.length) {
                        // æ‰€æœ‰æ­¥éª¤å·²å®Œæˆ
                        clearStepCards();
                        addBotMessage("ğŸ‰ æ­å–œï¼æ‚¨å·²å®Œæˆæ‰€æœ‰å…¥èŒæ­¥éª¤ï¼");
                        setTimeout(() => {
                            addBotMessage("å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶å¯ä»¥é—®æˆ‘ã€‚");
                            setTimeout(showMainMenu, 1000);
                        }, 1000);
                    } else {
                        // ç»§ç»­ä¸‹ä¸€æ­¥
                        addBotMessage("è®©æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥...");
                        setTimeout(showNextStep, 1000);
                    }
                }, 1000);
            }
        }

        // å®Œæˆå½“å‰æ­¥éª¤å¹¶ç»§ç»­
        function completeAndNext(stepId) {
            markStepComplete(stepId);
            
            setTimeout(() => {
                if (completedSteps.length === onboardingSteps.length) {
                    addBotMessage("ğŸ‰ æ­å–œï¼æ‚¨å·²å®Œæˆæ‰€æœ‰å…¥èŒæ­¥éª¤ï¼");
                    setTimeout(showMainMenu, 1500);
                } else {
                    addBotMessage("è®©æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ­¥...");
                    setTimeout(showNextStep, 1000);
                }
            }, 1000);
        }

        // æŸ¥çœ‹æ‰€æœ‰æ­¥éª¤
        function viewAllSteps() {
            addUserMessage("æŸ¥çœ‹æ‰€æœ‰æ­¥éª¤");
            
            setTimeout(() => {
                addBotMessage("è¿™æ˜¯å®Œæ•´çš„å…¥èŒæµç¨‹æ¸…å•ï¼š");
            }, 500);
            
            onboardingSteps.forEach((step, index) => {
                setTimeout(() => {
                    addStepCard(step);
                }, 1000 + index * 800);
            });
            
            setTimeout(() => {
                showMainMenu();
            }, 1000 + onboardingSteps.length * 800 + 500);
        }

        // æŸ¥çœ‹ç‰¹å®šæ­¥éª¤
        function viewSpecificStep() {
            addUserMessage("æŸ¥çœ‹ç‰¹å®šæ­¥éª¤");
            
            setTimeout(() => {
                addBotMessage("è¯·é€‰æ‹©æ‚¨æƒ³æŸ¥çœ‹çš„æ­¥éª¤ï¼š");
            }, 500);
            
            setTimeout(() => {
                const stepOptions = onboardingSteps.map(step => ({
                    text: `${step.id}. ${step.title}`,
                    action: `showStep:${step.id}`
                }));
                stepOptions.push({ text: "ğŸ  è¿”å›ä¸»èœå•", action: "menu" });
                addOptionsMessage(stepOptions);
            }, 1000);
        }

        // æ˜¾ç¤ºæŒ‡å®šæ­¥éª¤
        function showStep(stepId) {
            const step = onboardingSteps.find(s => s.id === stepId);
            if (step) {
                addUserMessage(step.title);
                setTimeout(() => {
                    addStepCard(step);
                }, 500);
                
                setTimeout(() => {
                    showMainMenu();
                }, 1500);
            }
        }

        // æŸ¥çœ‹è¿›åº¦
        function viewProgress() {
            addUserMessage("æŸ¥çœ‹æˆ‘çš„è¿›åº¦");
            
            const progress = Math.round((completedSteps.length / onboardingSteps.length) * 100);
            
            setTimeout(() => {
                addBotMessage(`ğŸ“Š æ‚¨çš„å…¥èŒè¿›åº¦ï¼š${completedSteps.length}/${onboardingSteps.length} (${progress}%)`);
            }, 500);
            
            setTimeout(() => {
                if (completedSteps.length === 0) {
                    addBotMessage("æ‚¨è¿˜æ²¡æœ‰å¼€å§‹å…¥èŒæµç¨‹ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼");
                } else if (completedSteps.length === onboardingSteps.length) {
                    addBotMessage("ğŸ‰ å¤ªæ£’äº†ï¼æ‚¨å·²å®Œæˆæ‰€æœ‰æ­¥éª¤ï¼");
                } else {
                    addBotMessage(`è¿˜æœ‰ ${onboardingSteps.length - completedSteps.length} ä¸ªæ­¥éª¤å¾…å®Œæˆã€‚`);
                }
            }, 1500);
            
            setTimeout(showMainMenu, 2500);
        }

        // é‡ç½®è¿›åº¦
        function resetProgress() {
            addUserMessage("é‡ç½®è¿›åº¦");
            
            setTimeout(() => {
                addBotMessage("ç¡®å®šè¦é‡ç½®æ‰€æœ‰è¿›åº¦å—ï¼Ÿ");
            }, 500);
            
            setTimeout(() => {
                const confirmOptions = [
                    { text: "âœ“ ç¡®è®¤é‡ç½®", action: "confirmReset" },
                    { text: "âœ— å–æ¶ˆ", action: "menu" }
                ];
                addOptionsMessage(confirmOptions);
            }, 1000);
        }

        // ç¡®è®¤é‡ç½®
        function confirmReset() {
            completedSteps = [];
            saveProgress();
            updateProgress();
            
            addUserMessage("ç¡®è®¤é‡ç½®");
            
            setTimeout(() => {
                addBotMessage("è¿›åº¦å·²é‡ç½®ï¼è®©æˆ‘ä»¬é‡æ–°å¼€å§‹å§ã€‚");
            }, 500);
            
            setTimeout(showMainMenu, 1500);
        }

        // ========== æ¶ˆæ¯æ˜¾ç¤ºå‡½æ•° ==========

        // æ·»åŠ æœºå™¨äººæ¶ˆæ¯
        function addBotMessage(text) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            messageDiv.innerHTML = `<div class="message-content">${text}</div>`;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        function addUserMessage(text) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `<div class="message-content">${text}</div>`;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // æ·»åŠ é€‰é¡¹æŒ‰é’®
        function addOptionsMessage(options) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            let optionsHTML = '<div class="message-content" style="max-width: 90%;"><div class="options">';
            options.forEach(option => {
                optionsHTML += `<button class="option-button" onclick="handleOption('${option.action}')">${option.text}</button>`;
            });
            optionsHTML += '</div></div>';
            
            messageDiv.innerHTML = optionsHTML;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // æ¸…ç©ºå·²å±•ç¤ºçš„æ­¥éª¤å¡ç‰‡ï¼ˆä»…ç§»é™¤å¡ç‰‡å‹æ¶ˆæ¯ï¼Œä¿ç•™æ™®é€šå¯¹è¯ï¼‰
        function clearStepCards() {
            const chatArea = document.getElementById('chatArea');
            const cards = chatArea.querySelectorAll('.step-card');
            cards.forEach(card => {
                const messageWrapper = card.closest('.message');
                if (messageWrapper) {
                    messageWrapper.remove();
                } else {
                    card.remove();
                }
            });
        }

        // å¤„ç†é€‰é¡¹ç‚¹å‡»
        function handleOption(action) {
            if (action === 'start') {
                startOnboarding();
            } else if (action === 'viewAll') {
                viewAllSteps();
            } else if (action === 'viewSpecific') {
                viewSpecificStep();
            } else if (action === 'viewProgress') {
                viewProgress();
            } else if (action === 'reset') {
                resetProgress();
            } else if (action === 'menu') {
                addUserMessage("è¿”å›ä¸»èœå•");
                setTimeout(showMainMenu, 500);
            } else if (action === 'skipToNext') {
                addUserMessage("è·³è¿‡ï¼ŒæŸ¥çœ‹ä¸‹ä¸€æ­¥");
                setTimeout(showNextStep, 500);
            } else if (action.startsWith('completeAndNext:')) {
                const stepId = parseInt(action.split(':')[1]);
                addUserMessage("å®Œæˆå¹¶ç»§ç»­ä¸‹ä¸€æ­¥");
                completeAndNext(stepId);
            } else if (action.startsWith('showStep:')) {
                const stepId = parseInt(action.split(':')[1]);
                showStep(stepId);
            } else if (action === 'confirmReset') {
                confirmReset();
            }
        }

        // å‘é€ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯
        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            
            if (text === '') return;
            
            addUserMessage(text);
            input.value = '';
            
            // ç®€å•çš„å…³é”®è¯åŒ¹é…
            setTimeout(() => {
                handleUserInput(text);
            }, 500);
        }

        // å¤„ç†ç”¨æˆ·è¾“å…¥
        function handleUserInput(text) {
            const lowerText = text.toLowerCase();
            
            if (lowerText.includes('å¼€å§‹') || lowerText.includes('æµç¨‹')) {
                startOnboarding();
            } else if (lowerText.includes('æŸ¥çœ‹') && lowerText.includes('æ‰€æœ‰')) {
                viewAllSteps();
            } else if (lowerText.includes('è¿›åº¦')) {
                viewProgress();
            } else if (lowerText.includes('é‡ç½®')) {
                resetProgress();
            } else if (lowerText.includes('èœå•') || lowerText.includes('å¸®åŠ©')) {
                addBotMessage("å¥½çš„ï¼Œè¿™æ˜¯ä¸»èœå•ï¼š");
                setTimeout(showMainMenu, 500);
            } else {
                // å°è¯•åŒ¹é…æ­¥éª¤å…³é”®è¯
                let foundStep = false;
                for (let step of onboardingSteps) {
                    if (lowerText.includes(step.title.toLowerCase().substring(0, 3))) {
                        showStep(step.id);
                        foundStep = true;
                        break;
                    }
                }
                
                if (!foundStep) {
                    addBotMessage("æŠ±æ­‰ï¼Œæˆ‘ä¸å¤ªæ˜ç™½ã€‚æ‚¨å¯ä»¥ï¼š");
                    setTimeout(showMainMenu, 500);
                }
            }
        }

        // ========== è¿›åº¦ç®¡ç†å‡½æ•° ==========

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const progress = (completedSteps.length / onboardingSteps.length) * 100;
            progressFill.style.width = progress + '%';
        }

        // ä¿å­˜è¿›åº¦åˆ°æœ¬åœ°å­˜å‚¨
        function saveProgress() {
            localStorage.setItem('onboardingProgress', JSON.stringify(completedSteps));
            console.log('è¿›åº¦å·²ä¿å­˜:', completedSteps);
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½è¿›åº¦
        function loadProgress() {
            const saved = localStorage.getItem('onboardingProgress');
            if (saved) {
                completedSteps = JSON.parse(saved);
                updateProgress();
                console.log('è¿›åº¦å·²åŠ è½½:', completedSteps);
            }
        }

        // æ»šåŠ¨åˆ°åº•éƒ¨
        function scrollToBottom() {
            const chatArea = document.getElementById('chatArea');
            chatArea.scrollTop = chatArea.scrollHeight;
        }
    </script>
</body>
</html>
