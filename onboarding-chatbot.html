<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTWÊô∫ËÉΩÂÖ•ËÅåÊåáÂºïÔºàAIÁâàÔºâ</title>
    <!-- ÂÜÖÁΩÆ faviconÔºåÈÅøÂÖç /favicon.ico 404 -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ü§ñ</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            height: 90vh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Â§¥ÈÉ®Âå∫Âüü */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        /* ËøõÂ∫¶Êù° */
        .progress-bar {
            background: rgba(255, 255, 255, 0.3);
            height: 8px;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: white;
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        /* ËÅäÂ§©Âå∫Âüü */
        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f5f5f5;
        }

        /* Ê∂àÊÅØÊ∞îÊ≥° */
        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot {
            display: flex;
            justify-content: flex-start;
        }

        .message.user {
            display: flex;
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.6;
        }

        .message.bot .message-content {
            background: white;
            color: #333;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .message.user .message-content {
            background: #667eea;
            color: white;
            border-bottom-right-radius: 4px;
        }

        /* Ê≠•È™§Âç°Áâá */
        .step-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin: 10px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #667eea;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .step-title {
            font-weight: bold;
            color: #333;
            font-size: 16px;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .step-content {
            color: #666;
            font-size: 14px;
            line-height: 1.8;
            white-space: pre-line;
        }

        .step-content strong {
            color: #333;
        }

        .step-content a {
            color: #667eea;
            text-decoration: none;
        }

        .step-content a:hover {
            text-decoration: underline;
        }

        .check-button {
            margin-top: 12px;
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .check-button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .check-button.completed {
            background: #4caf50;
            cursor: default;
        }

        .check-button.completed:hover {
            transform: none;
        }

        /* ÈÄâÈ°πÊåâÈíÆ */
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        .option-button {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-align: left;
        }

        .option-button:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }

        /* ËæìÂÖ•Âå∫Âüü */
        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
        }

        .input-area input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .input-area input:focus {
            border-color: #667eea;
        }

        .input-area button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .input-area button:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        /* Âä†ËΩΩÂä®Áîª */
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 10px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        /* ÊªöÂä®Êù°Ê†∑Âºè */
        .chat-area::-webkit-scrollbar {
            width: 6px;
        }

        .chat-area::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .chat-area::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }

        .chat-area::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* ÁôªÂΩïÈ°µÈù¢Ê†∑Âºè */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .login-box {
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            border-radius: 16px;
            padding: 60px 80px;
            text-align: center;
            max-width: 500px;
            width: 90%;
        }

        .login-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .login-title {
            color: #ffffff;
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .login-subtitle {
            color: #9ca3af;
            font-size: 16px;
            margin-bottom: 40px;
        }

        .login-button {
            width: 100%;
            padding: 16px;
            margin: 10px 0;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .login-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .login-button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .login-button.secondary {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .login-button.secondary:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .login-footer {
            color: #6b7280;
            font-size: 14px;
            margin-top: 30px;
        }

        /* PasskeyÁªëÂÆöÈ°µÈù¢Ê†∑Âºè */
        .bind-passkey-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            z-index: 10000;
            display: none;
            overflow-y: auto;
            padding: 40px 20px;
        }

        .bind-passkey-container {
            max-width: 600px;
            margin: 0 auto;
            background: #2a2a2a;
            border: 1px solid #3a3a3a;
            border-radius: 16px;
            padding: 40px;
        }

        .bind-passkey-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .bind-passkey-title {
            color: #ffffff;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .bind-passkey-subtitle {
            color: #9ca3af;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            color: #ffffff;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            background: #1a1a1a;
            border: 1px solid #3a3a3a;
            border-radius: 8px;
            color: #ffffff;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-input::placeholder {
            color: #6b7280;
        }

        .instructions-box {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }

        .instructions-title {
            color: #667eea;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instructions-content {
            color: #d1d5db;
            font-size: 14px;
            line-height: 1.8;
        }

        .instructions-content ol {
            margin: 10px 0;
            padding-left: 20px;
        }

        .instructions-content li {
            margin: 8px 0;
        }

        .form-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .form-button {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-button.submit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .form-button.submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }

        .form-button.cancel {
            background: transparent;
            color: #9ca3af;
            border: 1px solid #3a3a3a;
        }

        .form-button.cancel:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- ÁôªÂΩïÈ°µÈù¢ -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-box">
            <div class="login-icon">üîç</div>
            <h1 class="login-title">Welcome to Xiao Bao</h1>
            <p class="login-subtitle">Sign in with your passkey to continue</p>
            
            <button class="login-button primary" onclick="signInWithPasskey()">
                <span>‚ûú</span>
                <span>Sign in with Passkey</span>
            </button>
            
            <button class="login-button secondary" onclick="showBindPasskeyPage()">
                ÁªëÂÆöpasskey
            </button>
            
            <p class="login-footer">After signing in, click "Open Xiao Bao" in your<br>browser to return</p>
        </div>
    </div>

    <!-- PasskeyÁªëÂÆöÈ°µÈù¢ -->
    <div class="bind-passkey-page" id="bindPasskeyPage">
        <div class="bind-passkey-container">
            <div class="bind-passkey-header">
                <h2 class="bind-passkey-title">üîê ÁªëÂÆöPasskey</h2>
                <p class="bind-passkey-subtitle">ËØ∑Â°´ÂÜô‰ª•‰∏ã‰ø°ÊÅØÂÆåÊàêPasskeyÁªëÂÆö</p>
            </div>

            <form id="bindPasskeyForm" onsubmit="submitBindPasskey(event)">
                <div class="form-group">
                    <label class="form-label">ÈÇÆÁÆ±Âú∞ÂùÄ *</label>
                    <input type="email" class="form-input" id="emailInput" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂÖ¨Âè∏ÈÇÆÁÆ±" required>
                </div>

                <div class="form-group">
                    <label class="form-label">G123 ID *</label>
                    <input type="text" class="form-input" id="g123idInput" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑG123 ID" required>
                </div>

                <div class="instructions-box">
                    <div class="instructions-title">
                        <span>‚ÑπÔ∏è</span>
                        <span>PasskeyÁªëÂÆöËØ¥Êòé</span>
                    </div>
                    <div class="instructions-content">
                        <h3 style="color: #667eea; margin-top: 10px; margin-bottom: 10px;">üñ•Ô∏è Windows Á≥ªÁµ±</h3>
                        <p><strong>Step 1:</strong> ÈñãÂïüChrome browserÔºå<strong>ÁôªÂÖ•ÁßÅ‰∫∫Google Â∏≥Ëôü</strong></p>
                        <p style="margin-left: 20px; color: #fbbf24;">‚ö†Ô∏è ÈáçË¶ÅÊèêÈÜíÔºöChrome Ë®≠ÂÆö ‚Üí ÂêåÊ≠•ÈúÄË¶ÅÁ¢∫Ë™çPasskeyÂêåÊ≠•Â∑≤ÈñãÂïü</p>
                        
                        <p><strong>Step 2:</strong> ÈñãÂïü <a href="http://g123.jp" target="_blank" style="color: #667eea; text-decoration: underline;">g123.jp</a> Á∂≤Á´ôÔºåÈªûÊìäSNSÁ∂ÅÂÆöpasskeyÈÅ∏È†Ö</p>
                        <p style="margin-left: 20px;">ÈÅ∏Êìá‰ª•ÂÖ∂‰ªñÊñπÂºèÂÑ≤Â≠òÔºågoogleÂØÜÁ¢ºÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåÂ∞áÂØÜÁ¢ºÂÑ≤Â≠òÂú®Èõ≤Á´Ø‰ª•‰æøÁàæÂæåÂàáÊèõË®≠ÂÇô‰ΩøÁî®</p>
                        
                        <p><strong>Step 3:</strong> Ëº∏ÂÖ•ÂÖ≠‰ΩçÊï∏ÁôªÂÖ•pin code</p>
                        
                        <p><strong>Step 4:</strong> Á∂ÅÂÆöÊàêÂäü</p>
                        
                        <p><strong>Step 5:</strong> Â∞áÁ∂ÅÂÆöÊàêÂäüÁöÑg123 idË§áË£ΩË≤º‰∏äËá≥Ë©≤È†ÅÈù¢‰∏≠ÔºåËº∏ÂÖ•Ëá™Â∑±ÁöÑÈÉµÁÆ±ÔºåÈªûÊìäÊèê‰∫§</p>

                        <h3 style="color: #667eea; margin-top: 20px; margin-bottom: 10px;">üçé Mac Á≥ªÁµ±</h3>
                        <p><strong>Step 1:</strong> ÈñãÂïü <a href="http://g123.jp" target="_blank" style="color: #667eea; text-decoration: underline;">g123.jp</a>ÔºåÈªûÊìäSNSÁ∂ÅÂÆöpasskeyÈÅ∏È†Ö</p>
                        
                        <p><strong>Step 2:</strong> ÁÇ∫G123 IDÂª∫Á´ãÈáëÈë∞</p>
                        <p style="margin-left: 20px;">ÂèØÈÅ∏ÊìáÂ∞áÈáëÈë∞ÂÑ≤Â≠òËá≥Google ÂØÜÁ¢ºÁÆ°ÁêÜÂ∑•ÂÖ∑ÊàñÊòØiCloudÔºåÂ∞áÂØÜÁ¢ºÂÑ≤Â≠òÂú®Èõ≤Á´Ø‰ª•‰æøÁàæÂæåÂàáÊèõË®≠ÂÇô‰ΩøÁî®</p>
                        
                        <p><strong>Step 3:</strong> ‰ΩøÁî®ÂØÜÁ¢ºÊàñTouch IDÈÄ≤Ë°åÁ∂ÅÂÆö</p>
                        
                        <p><strong>Step 4:</strong> Á∂ÅÂÆöÊàêÂäü</p>
                        
                        <p><strong>Step 5:</strong> Â∞áÁ∂ÅÂÆöÊàêÂäüÁöÑg123 idË§áË£ΩË≤º‰∏äËá≥Ë©≤È†ÅÈù¢‰∏≠ÔºåËº∏ÂÖ•Ëá™Â∑±ÁöÑÈÉµÁÆ±ÔºåÈªûÊìäÊèê‰∫§</p>
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" class="form-button cancel" onclick="cancelBindPasskey()">ÂèñÊ∂à</button>
                    <button type="submit" class="form-button submit">Êèê‰∫§ÁªëÂÆö</button>
                </div>
            </form>
        </div>
    </div>

    <div class="container">
        <!-- Â§¥ÈÉ® -->
        <div class="header">
            <h1>ü§ñ CTWÊô∫ËÉΩÂÖ•ËÅåÊåáÂºï</h1>
            <p>AIÂä©ÊâãÂ∏¶ÊÇ®ÂÆåÊàêÂÖ•ËÅåÊµÅÁ®ã</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- ËÅäÂ§©Âå∫Âüü -->
        <div class="chat-area" id="chatArea">
            <!-- Ê∂àÊÅØÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∑ªÂä† -->
        </div>

        <!-- ËæìÂÖ•Âå∫Âüü -->
        <div class="input-area">
            <input type="text" id="userInput" placeholder="ËæìÂÖ•Ê∂àÊÅØÊàñÈÄâÊã©‰∏äÊñπÈÄâÈ°π..." />
            <button onclick="sendMessage()">ÂèëÈÄÅ</button>
        </div>
    </div>

    <script>
        // ========== Êï∞ÊçÆÁªìÊûÑ ==========
        
        // ÂÖ•ËÅåÊ≠•È™§Êï∞ÊçÆÔºàCTWÊô∫ËÉΩÂÖ•ËÅåÊåáÂºï AIÁâà - ÊúÄÊñ∞ÁâàÊú¨Ôºâ
        const onboardingSteps = [
            {
                id: 1,
                title: "PÁ≥ªÁªüËµÑÊñôÂ°´ÂÜô",
                content: `üìù Â°´ÂÜô‰ª•‰∏ã‰∏™‰∫∫‰ø°ÊÅØÔºö
   ‚Ä¢ ÊâãÊú∫Âè∑Á†Å
   ‚Ä¢ Ë∫´‰ªΩËØÅÂè∑
   ‚Ä¢ ÂºÄÊà∑Ë°å
   ‚Ä¢ Èì∂Ë°åÂç°Âè∑
   ‚Ä¢ È¶ñÊ¨°Â∑•‰ΩúÊó∂Èó¥
   ‚Ä¢ Á§æ‰øùË¥¶Âè∑
   ‚Ä¢ ÂÖ¨ÁßØÈáëË¥¶Âè∑
   ‚Ä¢ Â©öÂßªÁä∂ÊÄÅÁ≠â

üìé Â°´ÂÜôÂÖ•Âè£ÔºàÈíâÈíâË°®ÂçïÔºâÔºö
<a href="https://alidocs.dingtalk.com/notable/share/form/v01J9LnW6jmE5pZWlvD_dv19yqvsgs3oebp3pcjys_1qX0QQ0" target="_blank">ÁÇπÂáªÂ°´ÂÜô</a>

‚ö†Ô∏è ËØ∑Â¶ÇÂÆûÂ°´ÂÜôÊâÄÊúâ‰ø°ÊÅØ„ÄÇ`
            },
            {
                id: 2,
                title: "Â∏∏Áî®Á≥ªÁªü‰∏ÄËßà",
                content: `‚öôÔ∏è <strong>AÁ≥ªÁªüÔºà‰ªªÂä°ÁÆ°ÁêÜÔºâ</strong>
üîó <a href="https://a.g123.jp" target="_blank">https://a.g123.jp</a>
Áî®‰∫é‰ªªÂä°‰∏éËÆ°Êó∂ÁÆ°ÁêÜÔºåËØ∑Á°Æ‰øùÂèØÊ≠£Â∏∏ÁôªÂΩï„ÄÇ

üë• Ëé∑ÂèñÊùÉÈôêÔºö
   ‚Ä¢ <strong>ÁæéÊúØËÅå‰Ωç</strong>ÔºöËØ∑ËÅîÁ≥ªË¥üË¥£PMÊàñLeaderÈ¢ÜÂèñÂç°
   ‚Ä¢ <strong>ÈùûÁæéÊúØËÅå‰Ωç</strong>ÔºöÂèØËá™Ë°åÂàõÂª∫ÊàñÂêëLeaderÁî≥ËØ∑Âç°

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìö <strong>WÁ≥ªÁªüÔºàÂÜÖÈÉ®ÊñáÊ°£Ôºâ</strong>
üîó <a href="https://w.g123.jp" target="_blank">https://w.g123.jp</a>
Áî®‰∫éÊü•ÁúãÂÜÖÈÉ®ÊñáÊ°£ËµÑÊñô„ÄÇ

üîê ‰∏çÂêåÈÉ®Èó®ÊúâÂØπÂ∫îËÆøÈóÆÊùÉÈôêÔºö
   ‚Ä¢ TechÔºàÊäÄÊúØÔºâ
   ‚Ä¢ CreativeÔºàÂàõÊÑèÔºâ
   ‚Ä¢ OperationÔºàËøêËê•Ôºâ
   ‚Ä¢ ManagementÔºàÁÆ°ÁêÜÔºâ

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üé® <strong>EÁ≥ªÁªüÔºà‰ªÖÈôêÁæéÊúØËÅå‰ΩçÔºâ</strong>
üîó <a href="https://e.g123.jp" target="_blank">https://e.g123.jp</a>
Áî®‰∫éÁæéÊúØÁ¥†ÊùêÂà∂‰Ωú„ÄÅÁÆ°ÁêÜ‰∏éÁõë‰øÆ„ÄÇ

‚ö†Ô∏è Ê≥®ÊÑèÔºö<strong>‰ªÖÈôêÁæéÊúØËÅå‰Ωç‰ΩøÁî®</strong>ÔºåÈùûÁæéÊúØËÅå‰ΩçÊó†ÈúÄÂÖ≥Ê≥®Ê≠§Á≥ªÁªü„ÄÇ`
            },
            {
                id: 3,
                title: "ÈíâÈíâÂÖ•ÁªÑ",
                content: `üí¨ ËØ∑ÈÄöËøá‰ª•‰∏ãÈìæÊé•Âä†ÂÖ•Âõ¢ÈòüÈíâÈíâÁæ§ÁªÑ

üîó Âä†ÂÖ•ÈìæÊé•Ôºö
<a href="https://wx-in-i.dingtalk.com/invite-page/weixin.html?bizSource=____source____&corpId=ding0387e489e42436f835c2f4657eb6378f&inviteCode=UtCFfSk576JzW4h&dtaction=os" target="_blank">ÁÇπÂáªÂä†ÂÖ•</a>

‚ö†Ô∏è <strong>ÂêçÁß∞Ê†ºÂºèË¶ÅÊ±ÇÔºö‰∏≠Êñá-ÊãºÈü≥</strong>
   Á§∫‰æãÔºöÁéãÂ∞èÊòé-Wang Xiaoming

üí° ËØ∑Á°Æ‰øùÊÇ®ÁöÑÈíâÈíâÊòµÁß∞Á¨¶ÂêàÊ†ºÂºèË¶ÅÊ±Ç„ÄÇ`
            },
            {
                id: 4,
                title: "ÁÇπÈ§êÁ≥ªÁªü",
                content: `üç± ÁÇπÈ§êÁ≥ªÁªü‰ΩøÁî®ÊåáÂçó

üì± <strong>Ê≠•È™§1Ôºö</strong>ËØ∑Â∞ÜÊâãÊú∫Âè∑Êèê‰æõÁªô <strong>Ë°åÊîø-Êù®Êô∫Â∞ß</strong>ÔºåÂÆåÊàêÊ≥®ÂÜå

üì± <strong>Ê≠•È™§2Ôºö</strong>ÂæÆ‰ø°ÊêúÁ¥¢"<strong>ÊòìÁÇπÂêÉ</strong>"ÂÖ¨‰ºóÂè∑

üì± <strong>Ê≠•È™§3Ôºö</strong>ÁÇπÂáª"<strong>ÂºÄÂßãÁÇπÈ§ê</strong>"

üîë ÁôªÂΩï‰ø°ÊÅØÔºö
   ‚Ä¢ Ë¥¶Âè∑ÂêçÔºö<strong>ÊâãÊú∫Âè∑</strong>
   ‚Ä¢ ÂàùÂßãÂØÜÁ†ÅÔºö<strong>yidianc66688</strong>

üí° ÂÖ•ËÅåÂΩìÂ§©ÁöÑÈ•≠ËØ∑Âú®Ëå∂Ê∞¥Èó¥ÊãøÂ§áÈ§ê

‚ö†Ô∏è È¶ñÊ¨°ÁôªÂΩïÂêéËØ∑ÂèäÊó∂‰øÆÊîπÂØÜÁ†Å„ÄÇ`
            },
            {
                id: 5,
                title: "ÂÆåÊàêÂÖ•ËÅå",
                content: `üéâ <strong>ÊÅ≠ÂñúÔºÅÊÇ®Â∑≤ÂÆåÊàêÂÖ®ÈÉ®ÂÖ•ËÅåÊµÅÁ®ãÔºÅ</strong>

üì© Âä≥Âä®ÂêàÂêåÂ∞ÜÈÄöËøá <strong>ËÖæËÆØÁîµÂ≠êÁ≠æ</strong> ÂèëÈÄÅ
   ‚Ä¢ ËØ∑ÁïôÊÑèÁü≠‰ø°ÈÄöÁü•
   ‚Ä¢ ËØ∑‰∫éÂΩìÂ§©ÂÆåÊàêÁ≠æÁΩ≤

üìò ÂëòÂ∑•ÊâãÂÜåÔºö
<a href="https://w.g123.jp/doc/ws4iua1t13lkzjlt6xmiyvlhow-QCYVwSBAUZ" target="_blank">ÁÇπÂáªÊü•ÁúãÂëòÂ∑•ÊâãÂÜåÔºàWÁ≥ªÁªüÔºâ</a>

‚úÖ Ê¨¢ËøéÊ≠£ÂºèÂä†ÂÖ•Âõ¢ÈòüÔºÅ`
            }
        ];

        // ========== ÂÖ®Â±ÄÂèòÈáè ==========
        let currentStep = 0; // ÂΩìÂâçÊ≠•È™§
        let completedSteps = []; // Â∑≤ÂÆåÊàêÁöÑÊ≠•È™§
        let conversationStarted = false; // ÂØπËØùÊòØÂê¶ÂºÄÂßã
        let isLoggedIn = false; // ÊòØÂê¶Â∑≤ÁôªÂΩï

        // ========== ÂàùÂßãÂåñ ==========
        
        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        window.onload = function() {
            loadProgress(); // Âä†ËΩΩ‰øùÂ≠òÁöÑËøõÂ∫¶
            
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁôªÂΩï
            const loginStatus = localStorage.getItem('isLoggedIn');
            if (loginStatus === 'true') {
                // Â∑≤ÁôªÂΩïÔºåÈöêËóèÁôªÂΩïÈ°µÈù¢ÔºåÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØ
                hideLoginPage();
                showWelcomeMessage();
            } else {
                // Êú™ÁôªÂΩïÔºåÊòæÁ§∫ÁôªÂΩïÈ°µÈù¢
                showLoginPage();
            }
            
            // ÂõûËΩ¶ÂèëÈÄÅÊ∂àÊÅØ
            document.getElementById('userInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        };

        // ========== ÁôªÂΩïÁõ∏ÂÖ≥ÂáΩÊï∞ ==========

        // ÊòæÁ§∫ÁôªÂΩïÈ°µÈù¢
        function showLoginPage() {
            document.getElementById('loginOverlay').style.display = 'flex';
        }

        // ÈöêËóèÁôªÂΩïÈ°µÈù¢
        function hideLoginPage() {
            document.getElementById('loginOverlay').style.display = 'none';
        }

        // ÊòæÁ§∫PasskeyÁªëÂÆöÈ°µÈù¢
        function showBindPasskeyPage() {
            document.getElementById('bindPasskeyPage').style.display = 'block';
        }

        // ÂèñÊ∂àPasskeyÁªëÂÆö
        function cancelBindPasskey() {
            document.getElementById('bindPasskeyPage').style.display = 'none';
            document.getElementById('bindPasskeyForm').reset();
        }

        // Êèê‰∫§PasskeyÁªëÂÆö
        function submitBindPasskey(event) {
            event.preventDefault();
            
            const email = document.getElementById('emailInput').value;
            const g123id = document.getElementById('g123idInput').value;
            
            // ÊòæÁ§∫ÁªëÂÆö‰∏≠ÁöÑÊèêÁ§∫
            const submitBtn = event.target.querySelector('.form-button.submit');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'ÁªëÂÆö‰∏≠...';
            submitBtn.disabled = true;
            
            // Ê®°ÊãüÁªëÂÆöËøáÁ®ãÔºàÂÆûÈôÖÂ∫îÁî®‰∏≠ËøôÈáå‰ºöË∞ÉÁî®ÂêéÁ´ØAPIÔºâ
            setTimeout(() => {
                // ‰øùÂ≠òÁªëÂÆö‰ø°ÊÅØÂà∞Êú¨Âú∞Â≠òÂÇ®Ôºà‰ªÖÁî®‰∫éÊºîÁ§∫Ôºâ
                localStorage.setItem('passkeyEmail', email);
                localStorage.setItem('passkeyG123ID', g123id);
                
                // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
                alert('‚úÖ PasskeyÁªëÂÆöÊàêÂäüÔºÅ\n\nÈÇÆÁÆ±Ôºö' + email + '\nG123 IDÔºö' + g123id + '\n\nÁé∞Âú®ÊÇ®ÂèØ‰ª•‰ΩøÁî®PasskeyÁôªÂΩï‰∫Ü„ÄÇ');
                
                // ÈáçÁΩÆË°®Âçï
                document.getElementById('bindPasskeyForm').reset();
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                // ËøîÂõûÁôªÂΩïÈ°µÈù¢
                cancelBindPasskey();
            }, 1500);
        }

        // ‰ΩøÁî®PasskeyÁôªÂΩï
        function signInWithPasskey() {
            // ÊòæÁ§∫ÁôªÂΩï‰∏≠ÁöÑÊèêÁ§∫
            const loginBtn = event.target.closest('.login-button');
            const originalHTML = loginBtn.innerHTML;
            loginBtn.innerHTML = '<span>üîÑ</span><span>ÁôªÂΩï‰∏≠...</span>';
            loginBtn.disabled = true;
            
            // Ê®°ÊãüÁôªÂΩïËøáÁ®ãÔºàÂÆûÈôÖÂ∫îÁî®‰∏≠ËøôÈáå‰ºöË∞ÉÁî®PasskeyËÆ§ËØÅAPIÔºâ
            setTimeout(() => {
                // Ê†áËÆ∞‰∏∫Â∑≤ÁôªÂΩï
                isLoggedIn = true;
                localStorage.setItem('isLoggedIn', 'true');
                
                // ÈöêËóèÁôªÂΩïÈ°µÈù¢
                hideLoginPage();
                
                // ÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØÂπ∂ÂºÄÂßãÂÖ•ËÅåÊµÅÁ®ã
                showWelcomeMessage();
                
                // ÊÅ¢Â§çÊåâÈíÆÁä∂ÊÄÅ
                loginBtn.innerHTML = originalHTML;
                loginBtn.disabled = false;
            }, 1000);
        }

        // ========== Ê†∏ÂøÉÂäüËÉΩÂáΩÊï∞ ==========

        // ÊòæÁ§∫Ê¨¢ËøéÊ∂àÊÅØ
        function showWelcomeMessage() {
            setTimeout(() => {
                addBotMessage("ÊÇ®Â•ΩÔºÅÊ¨¢ËøéÂä†ÂÖ•ÂÖ¨Âè∏ üéâ");
            }, 500);
            
            setTimeout(() => {
                addBotMessage("ÊàëÊòØÊÇ®ÁöÑAIÂÖ•ËÅåÂä©ÊâãÔºåÂ∞ÜÂ∏ÆÂä©ÊÇ®ÂÆåÊàêCTWÁöÑÂÖ•ËÅåÊµÅÁ®ã„ÄÇ");
            }, 1500);
            
            setTimeout(() => {
                if (completedSteps.length > 0) {
                    addBotMessage(`Ê£ÄÊµãÂà∞ÊÇ®Â∑≤ÂÆåÊàê ${completedSteps.length}/${onboardingSteps.length} ‰∏™Ê≠•È™§„ÄÇ`);
                    setTimeout(() => {
                        showMainMenu();
                    }, 1000);
                } else {
                    addBotMessage("ËÆ©Êàë‰ª¨ÂºÄÂßãÂêßÔºÅËØ∑ÈÄâÊã©ÊÇ®ÈúÄË¶ÅÁöÑÊúçÂä°Ôºö");
                    setTimeout(() => {
                        showMainMenu();
                    }, 1000);
                }
            }, 2500);
        }

        // ÊòæÁ§∫‰∏ªËèúÂçï
        function showMainMenu() {
            const options = [
                { text: "üìã ÂºÄÂßãÂÖ•ËÅåÊµÅÁ®ã", action: "start" }
            ];
            
            addOptionsMessage(options);
        }

        // ÂºÄÂßãÂÖ•ËÅåÊµÅÁ®ã
        function startOnboarding() {
            addUserMessage("ÂºÄÂßãÂÖ•ËÅåÊµÅÁ®ã");
            
            setTimeout(() => {
                addBotMessage(`Â•ΩÁöÑÔºÅÂÖ•ËÅåÊµÅÁ®ãÂÖ±Êúâ ${onboardingSteps.length} ‰∏™Ê≠•È™§ÔºåÊàë‰ºöÈÄêÊ≠•‰∏∫ÊÇ®‰ªãÁªç„ÄÇ`);
            }, 500);
            
            setTimeout(() => {
                showNextStep();
            }, 1500);
        }

        // ÊòæÁ§∫‰∏ã‰∏Ä‰∏™Ê≠•È™§
        function showNextStep() {
            // ÊâæÂà∞Á¨¨‰∏Ä‰∏™Êú™ÂÆåÊàêÁöÑÊ≠•È™§
            let nextStepIndex = onboardingSteps.findIndex(step => !completedSteps.includes(step.id));
            
            if (nextStepIndex === -1) {
                // ÊâÄÊúâÊ≠•È™§Â∑≤ÂÆåÊàê
                clearStepCards();
                addBotMessage("üéâ ÊÅ≠ÂñúÔºÅÊÇ®Â∑≤ÂÆåÊàêÊâÄÊúâÂÖ•ËÅåÊ≠•È™§ÔºÅ");
                setTimeout(() => {
                    addBotMessage("Â¶ÇÊûúËøòÊúâÂÖ∂‰ªñÈóÆÈ¢òÔºåÈöèÊó∂ÂèØ‰ª•ÈóÆÊàë„ÄÇ");
                    setTimeout(showMainMenu, 1000);
                }, 1000);
                return;
            }
            
            currentStep = nextStepIndex;
            const step = onboardingSteps[currentStep];
            
            setTimeout(() => {
                addStepCard(step);
            }, 500);
        }

        // Ê∑ªÂä†Ê≠•È™§Âç°Áâá
        function addStepCard(step) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            const isCompleted = completedSteps.includes(step.id);
            
            messageDiv.innerHTML = `
                <div class="message-content" style="max-width: 90%;">
                    <div class="step-card">
                        <div class="step-header">
                            <span class="step-title">${step.title}</span>
                            <span class="step-number">${step.id}</span>
                        </div>
                        <div class="step-content">${step.content}</div>
                        <button class="check-button ${isCompleted ? 'completed' : ''}" 
                                onclick="markStepComplete(${step.id})"
                                ${isCompleted ? 'disabled' : ''}>
                            ${isCompleted ? '‚úì Â∑≤ÂÆåÊàê' : 'Ê†áËÆ∞‰∏∫ÂÆåÊàê'}
                        </button>
                    </div>
                </div>
            `;
            
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // Ê†áËÆ∞Ê≠•È™§ÂÆåÊàê
        function markStepComplete(stepId) {
            if (!completedSteps.includes(stepId)) {
                completedSteps.push(stepId);
                saveProgress(); // ‰øùÂ≠òËøõÂ∫¶Âà∞Êú¨Âú∞Â≠òÂÇ®
                updateProgress(); // Êõ¥Êñ∞ËøõÂ∫¶Êù°
                
                // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
                event.target.textContent = '‚úì Â∑≤ÂÆåÊàê';
                event.target.classList.add('completed');
                event.target.disabled = true;
                
                // ÊòæÁ§∫ÂÆåÊàêÊèêÁ§∫
                setTimeout(() => {
                    addBotMessage("ÂæàÂ•ΩÔºÅÂ∑≤Ê†áËÆ∞‰∏∫ÂÆåÊàê ‚úì");
                }, 300);
                
                // Ëá™Âä®ÊòæÁ§∫‰∏ã‰∏ÄÊ≠•
                setTimeout(() => {
                    if (completedSteps.length === onboardingSteps.length) {
                        // ÊâÄÊúâÊ≠•È™§Â∑≤ÂÆåÊàê
                        clearStepCards();
                        addBotMessage("üéâ ÊÅ≠ÂñúÔºÅÊÇ®Â∑≤ÂÆåÊàêÊâÄÊúâÂÖ•ËÅåÊ≠•È™§ÔºÅ");
                        setTimeout(() => {
                            addBotMessage("Â¶ÇÊûúËøòÊúâÂÖ∂‰ªñÈóÆÈ¢òÔºåÈöèÊó∂ÂèØ‰ª•ÈóÆÊàë„ÄÇ");
                            setTimeout(showMainMenu, 1000);
                        }, 1000);
                    } else {
                        // ÁªßÁª≠‰∏ã‰∏ÄÊ≠•
                        addBotMessage("ËÆ©Êàë‰ª¨ÁªßÁª≠‰∏ã‰∏ÄÊ≠•...");
                        setTimeout(showNextStep, 1000);
                    }
                }, 1000);
            }
        }

        // ÂÆåÊàêÂΩìÂâçÊ≠•È™§Âπ∂ÁªßÁª≠
        function completeAndNext(stepId) {
            markStepComplete(stepId);
            
            setTimeout(() => {
                if (completedSteps.length === onboardingSteps.length) {
                    addBotMessage("üéâ ÊÅ≠ÂñúÔºÅÊÇ®Â∑≤ÂÆåÊàêÊâÄÊúâÂÖ•ËÅåÊ≠•È™§ÔºÅ");
                    setTimeout(showMainMenu, 1500);
                } else {
                    addBotMessage("ËÆ©Êàë‰ª¨ÁªßÁª≠‰∏ã‰∏ÄÊ≠•...");
                    setTimeout(showNextStep, 1000);
                }
            }, 1000);
        }

        // Êü•ÁúãÊâÄÊúâÊ≠•È™§
        function viewAllSteps() {
            addUserMessage("Êü•ÁúãÊâÄÊúâÊ≠•È™§");
            
            setTimeout(() => {
                addBotMessage("ËøôÊòØÂÆåÊï¥ÁöÑÂÖ•ËÅåÊµÅÁ®ãÊ∏ÖÂçïÔºö");
            }, 500);
            
            onboardingSteps.forEach((step, index) => {
                setTimeout(() => {
                    addStepCard(step);
                }, 1000 + index * 800);
            });
            
            setTimeout(() => {
                showMainMenu();
            }, 1000 + onboardingSteps.length * 800 + 500);
        }

        // Êü•ÁúãÁâπÂÆöÊ≠•È™§
        function viewSpecificStep() {
            addUserMessage("Êü•ÁúãÁâπÂÆöÊ≠•È™§");
            
            setTimeout(() => {
                addBotMessage("ËØ∑ÈÄâÊã©ÊÇ®ÊÉ≥Êü•ÁúãÁöÑÊ≠•È™§Ôºö");
            }, 500);
            
            setTimeout(() => {
                const stepOptions = onboardingSteps.map(step => ({
                    text: `${step.id}. ${step.title}`,
                    action: `showStep:${step.id}`
                }));
                stepOptions.push({ text: "üè† ËøîÂõû‰∏ªËèúÂçï", action: "menu" });
                addOptionsMessage(stepOptions);
            }, 1000);
        }

        // ÊòæÁ§∫ÊåáÂÆöÊ≠•È™§
        function showStep(stepId) {
            const step = onboardingSteps.find(s => s.id === stepId);
            if (step) {
                addUserMessage(step.title);
                setTimeout(() => {
                    addStepCard(step);
                }, 500);
                
                setTimeout(() => {
                    showMainMenu();
                }, 1500);
            }
        }

        // Êü•ÁúãËøõÂ∫¶
        function viewProgress() {
            addUserMessage("Êü•ÁúãÊàëÁöÑËøõÂ∫¶");
            
            const progress = Math.round((completedSteps.length / onboardingSteps.length) * 100);
            
            setTimeout(() => {
                addBotMessage(`üìä ÊÇ®ÁöÑÂÖ•ËÅåËøõÂ∫¶Ôºö${completedSteps.length}/${onboardingSteps.length} (${progress}%)`);
            }, 500);
            
            setTimeout(() => {
                if (completedSteps.length === 0) {
                    addBotMessage("ÊÇ®ËøòÊ≤°ÊúâÂºÄÂßãÂÖ•ËÅåÊµÅÁ®ãÔºåËÆ©Êàë‰ª¨ÂºÄÂßãÂêßÔºÅ");
                } else if (completedSteps.length === onboardingSteps.length) {
                    addBotMessage("üéâ Â§™Ê£í‰∫ÜÔºÅÊÇ®Â∑≤ÂÆåÊàêÊâÄÊúâÊ≠•È™§ÔºÅ");
                } else {
                    addBotMessage(`ËøòÊúâ ${onboardingSteps.length - completedSteps.length} ‰∏™Ê≠•È™§ÂæÖÂÆåÊàê„ÄÇ`);
                }
            }, 1500);
            
            setTimeout(showMainMenu, 2500);
        }

        // ÈáçÁΩÆËøõÂ∫¶
        function resetProgress() {
            addUserMessage("ÈáçÁΩÆËøõÂ∫¶");
            
            setTimeout(() => {
                addBotMessage("Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâËøõÂ∫¶ÂêóÔºü");
            }, 500);
            
            setTimeout(() => {
                const confirmOptions = [
                    { text: "‚úì Á°ÆËÆ§ÈáçÁΩÆ", action: "confirmReset" },
                    { text: "‚úó ÂèñÊ∂à", action: "menu" }
                ];
                addOptionsMessage(confirmOptions);
            }, 1000);
        }

        // Á°ÆËÆ§ÈáçÁΩÆ
        function confirmReset() {
            completedSteps = [];
            saveProgress();
            updateProgress();
            
            addUserMessage("Á°ÆËÆ§ÈáçÁΩÆ");
            
            setTimeout(() => {
                addBotMessage("ËøõÂ∫¶Â∑≤ÈáçÁΩÆÔºÅËÆ©Êàë‰ª¨ÈáçÊñ∞ÂºÄÂßãÂêß„ÄÇ");
            }, 500);
            
            setTimeout(showMainMenu, 1500);
        }

        // ========== Ê∂àÊÅØÊòæÁ§∫ÂáΩÊï∞ ==========

        // Ê∑ªÂä†Êú∫Âô®‰∫∫Ê∂àÊÅØ
        function addBotMessage(text) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            messageDiv.innerHTML = `<div class="message-content">${text}</div>`;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ
        function addUserMessage(text) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `<div class="message-content">${text}</div>`;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // Ê∑ªÂä†ÈÄâÈ°πÊåâÈíÆ
        function addOptionsMessage(options) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            let optionsHTML = '<div class="message-content" style="max-width: 90%;"><div class="options">';
            options.forEach(option => {
                optionsHTML += `<button class="option-button" onclick="handleOption('${option.action}')">${option.text}</button>`;
            });
            optionsHTML += '</div></div>';
            
            messageDiv.innerHTML = optionsHTML;
            chatArea.appendChild(messageDiv);
            scrollToBottom();
        }

        // Ê∏ÖÁ©∫Â∑≤Â±ïÁ§∫ÁöÑÊ≠•È™§Âç°ÁâáÔºà‰ªÖÁßªÈô§Âç°ÁâáÂûãÊ∂àÊÅØÔºå‰øùÁïôÊôÆÈÄöÂØπËØùÔºâ
        function clearStepCards() {
            const chatArea = document.getElementById('chatArea');
            const cards = chatArea.querySelectorAll('.step-card');
            cards.forEach(card => {
                const messageWrapper = card.closest('.message');
                if (messageWrapper) {
                    messageWrapper.remove();
                } else {
                    card.remove();
                }
            });
        }

        // Â§ÑÁêÜÈÄâÈ°πÁÇπÂáª
        function handleOption(action) {
            if (action === 'start') {
                startOnboarding();
            } else if (action === 'viewAll') {
                viewAllSteps();
            } else if (action === 'viewSpecific') {
                viewSpecificStep();
            } else if (action === 'viewProgress') {
                viewProgress();
            } else if (action === 'reset') {
                resetProgress();
            } else if (action === 'menu') {
                addUserMessage("ËøîÂõû‰∏ªËèúÂçï");
                setTimeout(showMainMenu, 500);
            } else if (action === 'skipToNext') {
                addUserMessage("Ë∑≥ËøáÔºåÊü•Áúã‰∏ã‰∏ÄÊ≠•");
                setTimeout(showNextStep, 500);
            } else if (action.startsWith('completeAndNext:')) {
                const stepId = parseInt(action.split(':')[1]);
                addUserMessage("ÂÆåÊàêÂπ∂ÁªßÁª≠‰∏ã‰∏ÄÊ≠•");
                completeAndNext(stepId);
            } else if (action.startsWith('showStep:')) {
                const stepId = parseInt(action.split(':')[1]);
                showStep(stepId);
            } else if (action === 'confirmReset') {
                confirmReset();
            }
        }

        // ÂèëÈÄÅÁî®Êà∑ËæìÂÖ•ÁöÑÊ∂àÊÅØ
        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            
            if (text === '') return;
            
            addUserMessage(text);
            input.value = '';
            
            // ÁÆÄÂçïÁöÑÂÖ≥ÈîÆËØçÂåπÈÖç
            setTimeout(() => {
                handleUserInput(text);
            }, 500);
        }

        // Â§ÑÁêÜÁî®Êà∑ËæìÂÖ•
        function handleUserInput(text) {
            const lowerText = text.toLowerCase();
            
            if (lowerText.includes('ÂºÄÂßã') || lowerText.includes('ÊµÅÁ®ã')) {
                startOnboarding();
            } else if (lowerText.includes('Êü•Áúã') && lowerText.includes('ÊâÄÊúâ')) {
                viewAllSteps();
            } else if (lowerText.includes('ËøõÂ∫¶')) {
                viewProgress();
            } else if (lowerText.includes('ÈáçÁΩÆ')) {
                resetProgress();
            } else if (lowerText.includes('ËèúÂçï') || lowerText.includes('Â∏ÆÂä©')) {
                addBotMessage("Â•ΩÁöÑÔºåËøôÊòØ‰∏ªËèúÂçïÔºö");
                setTimeout(showMainMenu, 500);
            } else {
                // Â∞ùËØïÂåπÈÖçÊ≠•È™§ÂÖ≥ÈîÆËØç
                let foundStep = false;
                for (let step of onboardingSteps) {
                    if (lowerText.includes(step.title.toLowerCase().substring(0, 3))) {
                        showStep(step.id);
                        foundStep = true;
                        break;
                    }
                }
                
                if (!foundStep) {
                    addBotMessage("Êä±Ê≠âÔºåÊàë‰∏çÂ§™ÊòéÁôΩ„ÄÇÊÇ®ÂèØ‰ª•Ôºö");
                    setTimeout(showMainMenu, 500);
                }
            }
        }

        // ========== ËøõÂ∫¶ÁÆ°ÁêÜÂáΩÊï∞ ==========

        // Êõ¥Êñ∞ËøõÂ∫¶Êù°
        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const progress = (completedSteps.length / onboardingSteps.length) * 100;
            progressFill.style.width = progress + '%';
        }

        // ‰øùÂ≠òËøõÂ∫¶Âà∞Êú¨Âú∞Â≠òÂÇ®
        function saveProgress() {
            localStorage.setItem('onboardingProgress', JSON.stringify(completedSteps));
            console.log('ËøõÂ∫¶Â∑≤‰øùÂ≠ò:', completedSteps);
        }

        // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩËøõÂ∫¶
        function loadProgress() {
            const saved = localStorage.getItem('onboardingProgress');
            if (saved) {
                completedSteps = JSON.parse(saved);
                updateProgress();
                console.log('ËøõÂ∫¶Â∑≤Âä†ËΩΩ:', completedSteps);
            }
        }

        // ÊªöÂä®Âà∞Â∫ïÈÉ®
        function scrollToBottom() {
            const chatArea = document.getElementById('chatArea');
            chatArea.scrollTop = chatArea.scrollHeight;
        }
    </script>
</body>
</html>
